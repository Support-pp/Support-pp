//2.0.4.9-2
/*
Copyright (C) 2017 VerHext <support@allesverhext.de>

Support-Mail: <support@support-pp.de>
This work is licensed under the MIT License

All Sounds file Copyright (C) 2017 Support-pp.de
Sounds: https://sounds.support-pp.de

Status?
https://status.support-pp.de

Website?
https://support-pp.de


‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨  PRO  ‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨
Thank you for the donation. All PRO members help this project.
Here is a list:
- GamerBoomTV | Dan <Support++ bestes Support Script f√ºr Sinusbot. Macht schon Spa√ü mit den anderen coolen Devs an so einem gro√üen Projekt zu arbeiten danke das ich ein Teil davon seine darfü§ò>
- Rubmcraft | Elias <Teamspeak: Addbit.eu>
- Fynnx <Abonniert mich!>
- Jason | DJJayT <Wer ein gutes Support Script braucht und einen guten Geschmack hat benutzt Support++ ;)>
- Cutes-Gaming.net | <Cutes-Gaming.net dein Minecraft Netzwerk>
- Timo_sf | <Das Heranziehen der n√§chsten Generation ist eine Ehrenvolle und Bewusste Aufgabe>
- # <#>
- Kryben <Super Support Script, hilft uns bei der GermanProLeague den Usern Voice Support zu bieten!>
- DarkTV_Original <Ihr seit die besten>
- SecureIM <Danke f√ºr das tolle Script. Eine nette Erweiterung f√ºr den secureim.de TS3-Server.>
- Chriss <Nat√ºrlich gehe ich mit dem Kopf durch die Wand! Schlie√ülich soll ich ja meinen eigenen Weg gehen!>
- Abydos <Support is not only experience, but also learning>
- Herr_Minecraft | Niklas <Euer Plugin wird auf HeroLabsEU genutzt :D>
- Nxtmaster | Felix <Vielen Dank f√ºr das tolle Support Script und f√ºr die tolle Zeit in Team ich hoffe auf eine gute weiter Zeit!>

- Here is free space :D You can support us https://support-pp.de
‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨  PRO  ‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨
*/
var DSGVO = "Datenschutzerkl√§rung Wir freuen uns sehr √ºber Ihr Interesse an unserem Projekt. Datenschutz hat einen besonders hohen Stellenwert f√ºr die Projektleitung des Support++ Projektes. Eine Nutzung der Internetseiten und des Sinusbot scriptes Support++  des Support++ Projektes ist grunds√§tzlich ohne jede Angabe personenbezogener Daten m√∂glich. Sofern eine betroffene Person besondere Services unseres Projektes √ºber unsere Internetseite in Anspruch nehmen m√∂chte, in form der von uns angebotenen 'PRO' version k√∂nnte jedoch eine Verarbeitung personenbezogener Daten erforderlich werden. Ist die Verarbeitung personenbezogener Daten erforderlich und besteht f√ºr eine solche Verarbeitung keine gesetzliche Grundlage, holen wir generell eine Einwilligung der betroffenen Person ein. Die Verarbeitung personenbezogener Daten, beispielsweise des Namens, der Anschrift, E-Mail-Adresse oder Telefonnummer einer betroffenen Person, erfolgt stets im Einklang mit der Datenschutz-Grundverordnung und in √úbereinstimmung mit den f√ºr die Support++ geltenden landesspezifischen Datenschutzbestimmungen. Mittels dieser Datenschutzerkl√§rung m√∂chte unser Unternehmen die √ñffentlichkeit √ºber Art, Umfang und Zweck der von uns erhobenen, genutzten und verarbeiteten personenbezogenen Daten informieren. Ferner werden betroffene Personen mittels dieser Datenschutzerkl√§rung √ºber die ihnen zustehenden Rechte aufgekl√§rt. Das Support++ Projekt hat als f√ºr die Verarbeitung Verantwortlicher zahlreiche technische und organisatorische Ma√ünahmen umgesetzt, um einen m√∂glichst l√ºckenlosen Schutz der √ºber diese Internetseite verarbeiteten personenbezogenen Daten sicherzustellen. Dennoch k√∂nnen Internetbasierte Daten√ºbertragungen grunds√§tzlich Sicherheitsl√ºcken aufweisen, sodass ein absoluter Schutz nicht gew√§hrleistet werden kann. Aus diesem Grund steht es jeder betroffenen Person frei, personenbezogene Daten auch auf alternativen Wegen, beispielsweise telefonisch, an uns zu √ºbermitteln. 1. Begriffsbestimmungen Die Datenschutzerkl√§rung von Support++ beruht auf den Begrifflichkeiten, die durch den Europ√§ischen Richtlinien- und Verordnungsgeber beim Erlass der Datenschutz-Grundverordnung (DS-GVO) verwendet wurden. Unsere Datenschutzerkl√§rung soll sowohl f√ºr die √ñffentlichkeit als auch f√ºr unsere Kunden und Gesch√§ftspartner einfach lesbar und verst√§ndlich sein. Um dies zu gew√§hrleisten, m√∂chten wir vorab die verwendeten Begrifflichkeiten erl√§utern. Wir verwenden in dieser Datenschutzerkl√§rung unter anderem die folgenden Begriffe: a)    personenbezogene Daten Personenbezogene Daten sind alle Informationen, die sich auf eine identifizierte oder identifizierbare nat√ºrliche Person (im Folgenden ‚Äûbetroffene Person‚Äú) beziehen. Als identifizierbar wird eine nat√ºrliche Person angesehen, die direkt oder indirekt, insbesondere mittels Zuordnung zu einer Kennung wie einem Namen, zu einer Kennnummer, zu Standortdaten, zu einer Online-Kennung oder zu einem oder mehreren besonderen Merkmalen, die Ausdruck der physischen, physiologischen, genetischen, psychischen, wirtschaftlichen, kulturellen oder sozialen Identit√§t dieser nat√ºrlichen Person sind, identifiziert werden kann. b)    betroffene Person Betroffene Person ist jede identifizierte oder identifizierbare nat√ºrliche Person, deren personenbezogene Daten von dem f√ºr die Verarbeitung Verantwortlichen verarbeitet werden. c)    Verarbeitung Verarbeitung ist jeder mit oder ohne Hilfe automatisierter Verfahren ausgef√ºhrte Vorgang oder jede solche Vorgangsreihe im Zusammenhang mit personenbezogenen Daten wie das Erheben, das Erfassen, die Organisation, das Ordnen, die Speicherung, die Anpassung oder Ver√§nderung, das Auslesen, das Abfragen, die Verwendung, die Offenlegung durch √úbermittlung, Verbreitung oder eine andere Form der Bereitstellung, den Abgleich oder die Verkn√ºpfung, die Einschr√§nkung, das L√∂schen oder die Vernichtung. d)    Einschr√§nkung der Verarbeitung Einschr√§nkung der Verarbeitung ist die Markierung gespeicherter personenbezogener Daten mit dem Ziel, ihre k√ºnftige Verarbeitung einzuschr√§nken. e)    Profiling Profiling ist jede Art der automatisierten Verarbeitung personenbezogener Daten, die darin besteht, dass diese personenbezogenen Daten verwendet werden, um bestimmte pers√∂nliche Aspekte, die sich auf eine nat√ºrliche Person beziehen, zu bewerten, insbesondere, um Aspekte bez√ºglich Arbeitsleistung, wirtschaftlicher Lage, Gesundheit, pers√∂nlicher Vorlieben, Interessen, Zuverl√§ssigkeit, Verhalten, Aufenthaltsort oder Ortswechsel dieser nat√ºrlichen Person zu analysieren oder vorherzusagen. f)     Pseudonymisierung Pseudonymisierung ist die Verarbeitung personenbezogener Daten in einer Weise, auf welche die personenbezogenen Daten ohne Hinzuziehung zus√§tzlicher Informationen nicht mehr einer spezifischen betroffenen Person zugeordnet werden k√∂nnen, sofern diese zus√§tzlichen Informationen gesondert aufbewahrt werden und technischen und organisatorischen Ma√ünahmen unterliegen, die gew√§hrleisten, dass die personenbezogenen Daten nicht einer identifizierten oder identifizierbaren nat√ºrlichen Person zugewiesen werden. g)    Verantwortlicher oder f√ºr die Verarbeitung Verantwortlicher Verantwortlicher oder f√ºr die Verarbeitung Verantwortlicher ist die nat√ºrliche oder juristische Person, Beh√∂rde, Einrichtung oder andere Stelle, die allein oder gemeinsam mit anderen √ºber die Zwecke und Mittel der Verarbeitung von personenbezogenen Daten entscheidet. Sind die Zwecke und Mittel dieser Verarbeitung durch das Unionsrecht oder das Recht der Mitgliedstaaten vorgegeben, so kann der Verantwortliche beziehungsweise k√∂nnen die bestimmten Kriterien seiner Benennung nach dem Unionsrecht oder dem Recht der Mitgliedstaaten vorgesehen werden. h)    Auftragsverarbeiter Auftragsverarbeiter ist eine nat√ºrliche oder juristische Person, Beh√∂rde, Einrichtung oder andere Stelle, die personenbezogene Daten im Auftrag des Verantwortlichen verarbeitet. i)      Empf√§nger Empf√§nger ist eine nat√ºrliche oder juristische Person, Beh√∂rde, Einrichtung oder andere Stelle, der personenbezogene Daten offengelegt werden, unabh√§ngig davon, ob es sich bei ihr um einen Dritten handelt oder nicht. Beh√∂rden, die im Rahmen eines bestimmten Untersuchungsauftrags nach dem Unionsrecht oder dem Recht der Mitgliedstaaten m√∂glicherweise personenbezogene Daten erhalten, gelten jedoch nicht als Empf√§nger. j)      Dritter Dritter ist eine nat√ºrliche oder juristische Person, Beh√∂rde, Einrichtung oder andere Stelle au√üer der betroffenen Person, dem Verantwortlichen, dem Auftragsverarbeiter und den Personen, die unter der unmittelbaren Verantwortung des Verantwortlichen oder des Auftragsverarbeiters befugt sind, die personenbezogenen Daten zu verarbeiten.k)    Einwilligung Einwilligung ist jede von der betroffenen Person freiwillig f√ºr den bestimmten Fall in informierter Weise und unmissverst√§ndlich abgegebene Willensbekundung in Form einer Erkl√§rung oder einer sonstigen eindeutigen best√§tigenden Handlung, mit der die betroffene Person zu verstehen gibt, dass sie mit der Verarbeitung der sie betreffenden personenbezogenen Daten einverstanden ist.2. Name und Anschrift des f√ºr die Verarbeitung Verantwortlichen Verantwortlicher im Sinne der Datenschutz-Grundverordnung, sonstiger in den Mitgliedstaaten der Europ√§ischen Union geltenden Datenschutzgesetze und anderer Bestimmungen mit datenschutzrechtlichem Charakter ist die: Johannes Waigel Kurt-Schumacher-Stra√üe 2 89343 Jettingen (Scheppach) Deutschland Tel.: +49 08225 5843897 E-Mail: support@support-pp.de Website: www.support-pp.de 3. Cookies werden in diesem Script nicht gespeichert. 4. Erfassung von allgemeinen Daten und Informationen Die Internetseite von Support++ erfasst mit jedem Aufruf der Internetseite durch eine betroffene Person oder ein automatisiertes System eine Reihe von allgemeinen Daten und Informationen. Diese allgemeinen Daten und Informationen werden in den Logfiles des Servers gespeichert. Erfasst werden k√∂nnen die (1) verwendeten Browsertypen und Versionen, (2) das vom zugreifenden System verwendete Betriebssystem, (3) die Internetseite, von welcher ein zugreifendes System auf unsere Internetseite gelangt (sogenannte Referrer), (4) die Unterwebseiten, welche √ºber ein zugreifendes System auf unserer Internetseite angesteuert werden, (5) das Datum und die Uhrzeit eines Zugriffs auf die Internetseite, (6) eine Internet-Protokoll-Adresse (IP-Adresse), (7) der Internet-Service-Provider des zugreifenden Systems und (8) sonstige √§hnliche Daten und Informationen, die der Gefahrenabwehr im Falle von Angriffen auf unsere informationstechnologischen Systeme dienen. Bei der Nutzung dieser allgemeinen Daten und Informationen zieht Support++ keine R√ºckschl√ºsse auf die betroffene Person. Diese Informationen werden vielmehr ben√∂tigt, um (1) die Inhalte unserer Internetseite korrekt auszuliefern, (2) die Inhalte unserer Internetseite sowie die Werbung f√ºr diese zu optimieren, (3) die dauerhafte Funktionsf√§higkeit unserer informationstechnologischen Systeme und der Technik unserer Internetseite zu gew√§hrleisten sowie (4) um Strafverfolgungsbeh√∂rden im Falle eines Cyberangriffes die zur Strafverfolgung notwendigen Informationen bereitzustellen. Diese anonym erhobenen Daten und Informationen werden durch Support++ daher einerseits statistisch und ferner mit dem Ziel ausgewertet, den Datenschutz und die Datensicherheit in unserem Unternehmen zu erh√∂hen, um letztlich ein optimales Schutzniveau f√ºr die von uns verarbeiteten personenbezogenen Daten sicherzustellen. Die anonymen Daten der Server-Logfiles werden getrennt von allen durch eine betroffene Person angegebenen personenbezogenen Daten gespeichert. 5. Registrierung auf unserer Internetseite Die betroffene Person hat die M√∂glichkeit, sich auf der Internetseite des f√ºr die Verarbeitung Verantwortlichen unter Angabe von personenbezogenen Daten zu registrieren. Welche personenbezogenen Daten dabei an den f√ºr die Verarbeitung Verantwortlichen √ºbermittelt werden, ergibt sich aus der jeweiligen Eingabemaske, die f√ºr die Registrierung verwendet wird. Die von der betroffenen Person eingegebenen personenbezogenen Daten werden ausschlie√ülich f√ºr die interne Verwendung bei dem f√ºr die Verarbeitung Verantwortlichen und f√ºr eigene Zwecke erhoben und gespeichert. Der f√ºr die Verarbeitung Verantwortliche kann die Weitergabe an einen oder mehrere Auftragsverarbeiter, beispielsweise einen Paketdienstleister, veranlassen, der die personenbezogenen Daten ebenfalls ausschlie√ülich f√ºr eine interne Verwendung, die dem f√ºr die Verarbeitung Verantwortlichen zuzurechnen ist, nutzt. Durch eine Registrierung auf der Internetseite des f√ºr die Verarbeitung Verantwortlichen wird ferner die vom Internet-Service-Provider (ISP) der betroffenen Person vergebene IP-Adresse, das Datum sowie die Uhrzeit der Registrierung gespeichert. Die Speicherung dieser Daten erfolgt vor dem Hintergrund, dass nur so der Missbrauch unserer Dienste verhindert werden kann, und diese Daten im Bedarfsfall erm√∂glichen, begangene Straftaten aufzukl√§ren. Insofern ist die Speicherung dieser Daten zur Absicherung des f√ºr die Verarbeitung Verantwortlichen erforderlich. Eine Weitergabe dieser Daten an Dritte erfolgt grunds√§tzlich nicht, sofern keine gesetzliche Pflicht zur Weitergabe besteht oder die Weitergabe der Strafverfolgung dient. Die Registrierung der betroffenen Person unter freiwilliger Angabe personenbezogener Daten dient dem f√ºr die Verarbeitung Verantwortlichen dazu, der betroffenen Person Inhalte oder Leistungen anzubieten, die aufgrund der Natur der Sache nur registrierten Benutzern angeboten werden k√∂nnen. Registrierten Personen steht die M√∂glichkeit frei, die bei der Registrierung angegebenen personenbezogenen Daten jederzeit abzu√§ndern oder vollst√§ndig aus dem Datenbestand des f√ºr die Verarbeitung Verantwortlichen l√∂schen zu lassen. Der f√ºr die Verarbeitung Verantwortliche erteilt jeder betroffenen Person jederzeit auf Anfrage Auskunft dar√ºber, welche personenbezogenen Daten √ºber die betroffene Person gespeichert sind. Ferner berichtigt oder l√∂scht der f√ºr die Verarbeitung Verantwortliche personenbezogene Daten auf Wunsch oder Hinweis der betroffenen Person, soweit dem keine gesetzlichen Aufbewahrungspflichten entgegenstehen. Ein in dieser Datenschutzerkl√§rung namentlich benannter Datenschutzbeauftragter und die Gesamtheit der Mitarbeiter des f√ºr die Verarbeitung Verantwortlichen stehen der betroffenen Person in diesem Zusammenhang als Ansprechpartner zur Verf√ºgung.8. Kontaktm√∂glichkeit √ºber die Internetseite Die Internetseite von Support++ enth√§lt aufgrund von gesetzlichen Vorschriften Angaben, die eine schnelle elektronische Kontaktaufnahme zu unserem Unternehmen sowie eine unmittelbare Kommunikation mit uns erm√∂glichen, was ebenfalls eine allgemeine Adresse der sogenannten elektronischen Post (E-Mail-Adresse) umfasst. Sofern eine betroffene Person per E-Mail oder √ºber ein Kontaktformular den Kontakt mit dem f√ºr die Verarbeitung Verantwortlichen aufnimmt, werden die von der betroffenen Person √ºbermittelten personenbezogenen Daten automatisch gespeichert. Solche auf freiwilliger Basis von einer betroffenen Person an den f√ºr die Verarbeitung Verantwortlichen √ºbermittelten personenbezogenen Daten werden f√ºr Zwecke der Bearbeitung oder der Kontaktaufnahme zur betroffenen Person gespeichert. Es erfolgt keine Weitergabe dieser personenbezogenen Daten an Dritte. 11. Routinem√§√üige L√∂schung und Sperrung von personenbezogenen Daten Der f√ºr die Verarbeitung Verantwortliche verarbeitet und speichert personenbezogene Daten der betroffenen Person nur f√ºr den Zeitraum, der zur Erreichung des Speicherungszwecks erforderlich ist oder sofern dies durch den Europ√§ischen Richtlinien- und Verordnungsgeber oder einen anderen Gesetzgeber in Gesetzen oder Vorschriften, welchen der f√ºr die Verarbeitung Verantwortliche unterliegt, vorgesehen wurde. Entf√§llt der Speicherungszweck oder l√§uft eine vom Europ√§ischen Richtlinien- und Verordnungsgeber oder einem anderen zust√§ndigen Gesetzgeber vorgeschriebene Speicherfrist ab, werden die personenbezogenen Daten routinem√§√üig und entsprechend den gesetzlichen Vorschriften gesperrt oder gel√∂scht. 12. Rechte der betroffenen Person a)    Recht auf Best√§tigung Jede betroffene Person hat das vom Europ√§ischen Richtlinien- und Verordnungsgeber einger√§umte Recht, von dem f√ºr die Verarbeitung Verantwortlichen eine Best√§tigung dar√ºber zu verlangen, ob sie betreffende personenbezogene Daten verarbeitet werden. M√∂chte eine betroffene Person dieses Best√§tigungsrecht in Anspruch nehmen, kann sie sich hierzu jederzeit an unseren Datenschutzbeauftragten oder einen anderen Mitarbeiter des f√ºr die Verarbeitung Verantwortlichen wenden. b)    Recht auf Auskunft Jede von der Verarbeitung personenbezogener Daten betroffene Person hat das vom Europ√§ischen Richtlinien- und Verordnungsgeber gew√§hrte Recht, jederzeit von dem f√ºr die Verarbeitung Verantwortlichen unentgeltliche Auskunft √ºber die zu seiner Person gespeicherten personenbezogenen Daten und eine Kopie dieser Auskunft zu erhalten. Ferner hat der Europ√§ische Richtlinien- und Verordnungsgeber der betroffenen Person Auskunft √ºber folgende Informationen zugestanden: die Verarbeitungszwecke die Kategorien personenbezogener Daten, die verarbeitet werden die Empf√§nger oder Kategorien von Empf√§ngern, gegen√ºber denen die personenbezogenen Daten offengelegt worden sind oder noch offengelegt werden, insbesondere bei Empf√§ngern in Drittl√§ndern oder bei internationalen Organisationen falls m√∂glich die geplante Dauer, f√ºr die die personenbezogenen Daten gespeichert werden, oder, falls dies nicht m√∂glich ist, die Kriterien f√ºr die Festlegung dieser Dauer das Bestehen eines Rechts auf Berichtigung oder L√∂schung der sie betreffenden personenbezogenen Daten oder auf Einschr√§nkung der Verarbeitung durch den Verantwortlichen oder eines Widerspruchsrechts gegen diese Verarbeitung das Bestehen eines Beschwerderechts bei einer Aufsichtsbeh√∂rde wenn die personenbezogenen Daten nicht bei der betroffenen Person erhoben werden: Alle verf√ºgbaren Informationen √ºber die Herkunft der Daten das Bestehen einer automatisierten Entscheidungsfindung einschlie√ülich Profiling gem√§√ü Artikel 22 Abs.1 und 4 DS-GVO und ‚Äî zumindest in diesen F√§llen ‚Äî aussagekr√§ftige Informationen √ºber die involvierte Logik sowie die Tragweite und die angestrebten Auswirkungen einer derartigen Verarbeitung f√ºr die betroffene Person Ferner steht der betroffenen Person ein Auskunftsrecht dar√ºber zu, ob personenbezogene Daten an ein Drittland oder an eine internationale Organisation √ºbermittelt wurden. Sofern dies der Fall ist, so steht der betroffenen Person im √úbrigen das Recht zu, Auskunft √ºber die geeigneten Garantien im Zusammenhang mit der √úbermittlung zu erhalten. M√∂chte eine betroffene Person dieses Auskunftsrecht in Anspruch nehmen, kann sie sich hierzu jederzeit an unseren Datenschutzbeauftragten oder einen anderen Mitarbeiter des f√ºr die Verarbeitung Verantwortlichen wenden. c)    Recht auf Berichtigung Jede von der Verarbeitung personenbezogener Daten betroffene Person hat das vom Europ√§ischen Richtlinien- und Verordnungsgeber gew√§hrte Recht, die unverz√ºgliche Berichtigung sie betreffender unrichtiger personenbezogener Daten zu verlangen. Ferner steht der betroffenen Person das Recht zu, unter Ber√ºcksichtigung der Zwecke der Verarbeitung, die Vervollst√§ndigung unvollst√§ndiger personenbezogener Daten ‚Äî auch mittels einer erg√§nzenden Erkl√§rung ‚Äî zu verlangen. M√∂chte eine betroffene Person dieses Berichtigungsrecht in Anspruch nehmen, kann sie sich hierzu jederzeit an unseren Datenschutzbeauftragten oder einen anderen Mitarbeiter des f√ºr die Verarbeitung Verantwortlichen wenden. d)    Recht auf L√∂schung (Recht auf Vergessen werden) Jede von der Verarbeitung personenbezogener Daten betroffene Person hat das vom Europ√§ischen Richtlinien- und Verordnungsgeber gew√§hrte Recht, von dem Verantwortlichen zu verlangen, dass die sie betreffenden personenbezogenen Daten unverz√ºglich gel√∂scht werden, sofern einer der folgenden Gr√ºnde zutrifft und soweit die Verarbeitung nicht erforderlich ist: Die personenbezogenen Daten wurden f√ºr solche Zwecke erhoben oder auf sonstige Weise verarbeitet, f√ºr welche sie nicht mehr notwendig sind. Die betroffene Person widerruft ihre Einwilligung, auf die sich die Verarbeitung gem√§√ü Art. 6 Abs. 1 Buchstabe a DS-GVO oder Art. 9 Abs. 2 Buchstabe a DS-GVO st√ºtzte, und es fehlt an einer anderweitigen Rechtsgrundlage f√ºr die Verarbeitung. Die betroffene Person legt gem√§√ü Art. 21 Abs. 1 DS-GVO Widerspruch gegen die Verarbeitung ein, und es liegen keine vorrangigen berechtigten Gr√ºnde f√ºr die Verarbeitung vor, oder die betroffene Person legt gem√§√ü Art. 21 Abs. 2 DS-GVO Widerspruch gegen die Verarbeitung ein. Die personenbezogenen Daten wurden unrechtm√§√üig verarbeitet. Die L√∂schung der personenbezogenen Daten ist zur Erf√ºllung einer rechtlichen Verpflichtung nach dem Unionsrecht oder dem Recht der Mitgliedstaaten erforderlich, dem der Verantwortliche unterliegt. Die personenbezogenen Daten wurden in Bezug auf angebotene Dienste der Informationsgesellschaft gem√§√ü Art. 8 Abs. 1 DS-GVO erhoben. Sofern einer der oben genannten Gr√ºnde zutrifft und eine betroffene Person die L√∂schung von personenbezogenen Daten, die bei dem Projekt Support++ gespeichert sind, veranlassen m√∂chte, kann sie sich hierzu jederzeit an unseren Datenschutzbeauftragten oder einen anderen Mitarbeiter des f√ºr die Verarbeitung Verantwortlichen wenden. Bitte wende dich hierzu an den Mitarbeiter Valentin Sickert. Der Datenschutzbeauftragte von Support++ oder ein anderer Mitarbeiter wird veranlassen, dass dem L√∂schverlangen unverz√ºglich nachgekommen wird. Wurden die personenbezogenen Daten vom Support++ √∂ffentlich gemacht und ist unser Projekt als Verantwortlicher gem√§√ü Art. 17 Abs. 1 DS-GVO zur L√∂schung der personenbezogenen Daten verpflichtet, so trifft Support++ unter Ber√ºcksichtigung der verf√ºgbaren Technologie und der Implementierungskosten angemessene Ma√ünahmen, auch technischer Art, um andere f√ºr die Datenverarbeitung Verantwortliche, welche die ver√∂ffentlichten personenbezogenen Daten verarbeiten, dar√ºber in Kenntnis zu setzen, dass die betroffene Person von diesen anderen f√ºr die Datenverarbeitung Verantwortlichen die L√∂schung s√§mtlicher Links zu diesen personenbezogenen Daten oder von Kopien oder Replikationen dieser personenbezogenen Daten verlangt hat, soweit die Verarbeitung nicht erforderlich ist. Der Datenschutzbeauftragte von Support++ oder ein anderer Mitarbeiter wird im Einzelfall das Notwendige veranlassen. e)    Recht auf Einschr√§nkung der Verarbeitung Jede von der Verarbeitung personenbezogener Daten betroffene Person hat das vom Europ√§ischen Richtlinien- und Verordnungsgeber gew√§hrte Recht, von dem Verantwortlichen die Einschr√§nkung der Verarbeitung zu verlangen, wenn eine der folgenden Voraussetzungen gegeben ist: Die Richtigkeit der personenbezogenen Daten wird von der betroffenen Person bestritten, und zwar f√ºr eine Dauer, die es dem Verantwortlichen erm√∂glicht, die Richtigkeit der personenbezogenen Daten zu √ºberpr√ºfen. Die Verarbeitung ist unrechtm√§√üig, die betroffene Person lehnt die L√∂schung der personenbezogenen Daten ab und verlangt stattdessen die Einschr√§nkung der Nutzung der personenbezogenen Daten. Der Verantwortliche ben√∂tigt die personenbezogenen Daten f√ºr die Zwecke der Verarbeitung nicht l√§nger, die betroffene Person ben√∂tigt sie jedoch zur Geltendmachung, Aus√ºbung oder Verteidigung von Rechtsanspr√ºchen. Die betroffene Person hat Widerspruch gegen die Verarbeitung gem. Art. 21 Abs. 1 DS-GVO eingelegt und es steht noch nicht fest, ob die berechtigten Gr√ºnde des Verantwortlichen gegen√ºber denen der betroffenen Person √ºberwiegen. Sofern eine der oben genannten Voraussetzungen gegeben ist und eine betroffene Person die Einschr√§nkung von personenbezogenen Daten, die bei Support++ gespeichert sind, verlangen m√∂chte, kann sie sich hierzu jederzeit an unseren Datenschutzbeauftragten oder einen anderen Mitarbeiter des f√ºr die Verarbeitung Verantwortlichen wenden. Der Datenschutzbeauftragte von Support++ oder ein anderer Mitarbeiter wird die Einschr√§nkung der Verarbeitung veranlassen. f)     Recht auf Daten√ºbertragbarkeit Jede von der Verarbeitung personenbezogener Daten betroffene Person hat das vom Europ√§ischen Richtlinien- und Verordnungsgeber gew√§hrte Recht, die sie betreffenden personenbezogenen Daten, welche durch die betroffene Person einem Verantwortlichen bereitgestellt wurden, in einem strukturierten, g√§ngigen und maschinenlesbaren Format zu erhalten. Sie hat au√üerdem das Recht, diese Daten einem anderen Verantwortlichen ohne Behinderung durch den Verantwortlichen, dem die personenbezogenen Daten bereitgestellt wurden, zu √ºbermitteln, sofern die Verarbeitung auf der Einwilligung gem√§√ü Art. 6 Abs. 1 Buchstabe a DS-GVO oder Art. 9 Abs. 2 Buchstabe a DS-GVO oder auf einem Vertrag gem√§√ü Art. 6 Abs. 1 Buchstabe b DS-GVO beruht und die Verarbeitung mithilfe automatisierter Verfahren erfolgt, sofern die Verarbeitung nicht f√ºr die Wahrnehmung einer Aufgabe erforderlich ist, die im √∂ffentlichen Interesse liegt oder in Aus√ºbung √∂ffentlicher Gewalt erfolgt, welche dem Verantwortlichen √ºbertragen wurde. Ferner hat die betroffene Person bei der Aus√ºbung ihres Rechts auf Daten√ºbertragbarkeit gem√§√ü Art. 20 Abs. 1 DS-GVO das Recht, zu erwirken, dass die personenbezogenen Daten direkt von einem Verantwortlichen an einen anderen Verantwortlichen √ºbermittelt werden, soweit dies technisch machbar ist und sofern hiervon nicht die Rechte und Freiheiten anderer Personen beeintr√§chtigt werden. Zur Geltendmachung des Rechts auf Daten√ºbertragbarkeit kann sich die betroffene Person jederzeit an den von Support++ bestellten Datenschutzbeauftragten oder einen anderen Mitarbeiter wenden.g)    Recht auf Widerspruch Jede von der Verarbeitung personenbezogener Daten betroffene Person hat das vom Europ√§ischen Richtlinien- und Verordnungsgeber gew√§hrte Recht, aus Gr√ºnden, die sich aus ihrer besonderen Situation ergeben, jederzeit gegen die Verarbeitung sie betreffender personenbezogener Daten, die aufgrund von Art. 6 Abs. 1 Buchstaben e oder f DS-GVO erfolgt, Widerspruch einzulegen. Dies gilt auch f√ºr ein auf diese Bestimmungen gest√ºtztes Profiling. Das Support++ Projekt verarbeitet die personenbezogenen Daten im Falle des Widerspruchs nicht mehr, es sei denn, wir k√∂nnen zwingende schutzw√ºrdige Gr√ºnde f√ºr die Verarbeitung nachweisen, die den Interessen, Rechten und Freiheiten der betroffenen Person √ºberwiegen, oder die Verarbeitung dient der Geltendmachung, Aus√ºbung oder Verteidigung von Rechtsanspr√ºchen. Verarbeitet Support++ personenbezogene Daten, um Direktwerbung zu betreiben, so hat die betroffene Person das Recht, jederzeit Widerspruch gegen die Verarbeitung der personenbezogenen Daten zum Zwecke derartiger Werbung einzulegen. Dies gilt auch f√ºr das Profiling, soweit es mit solcher Direktwerbung in Verbindung steht. Widerspricht die betroffene Person gegen√ºber Support++ der Verarbeitung f√ºr Zwecke der Direktwerbung, so wird das Projekt Support++ die personenbezogenen Daten nicht mehr f√ºr diese Zwecke verarbeiten. Zudem hat die betroffene Person das Recht, aus Gr√ºnden, die sich aus ihrer besonderen Situation ergeben, gegen die sie betreffende Verarbeitung personenbezogener Daten, die bei Support++ zu wissenschaftlichen oder historischen Forschungszwecken oder zu statistischen Zwecken gem√§√ü Art. 89 Abs. 1 DS-GVO erfolgen, Widerspruch einzulegen, es sei denn, eine solche Verarbeitung ist zur Erf√ºllung einer im √∂ffentlichen Interesse liegenden Aufgabe erforderlich. Zur Aus√ºbung des Rechts auf Widerspruch kann sich die betroffene Person direkt an den Datenschutzbeauftragten von Support++ oder einen anderen Mitarbeiter wenden. Der betroffenen Person steht es ferner frei, im Zusammenhang mit der Nutzung von Diensten der Informationsgesellschaft, ungeachtet der Richtlinie 2002/58/EG, ihr Widerspruchsrecht mittels automatisierter Verfahren auszu√ºben, bei denen technische Spezifikationen verwendet werden. h)    Automatisierte Entscheidungen im Einzelfall einschlie√ülich Profiling Jede von der Verarbeitung personenbezogener Daten betroffene Person hat das vom Europ√§ischen Richtlinien- und Verordnungsgeber gew√§hrte Recht, nicht einer ausschlie√ülich auf einer automatisierten Verarbeitung ‚Äî einschlie√ülich Profiling ‚Äî beruhenden Entscheidung unterworfen zu werden, die ihr gegen√ºber rechtliche Wirkung entfaltet oder sie in √§hnlicher Weise erheblich beeintr√§chtigt, sofern die Entscheidung (1) nicht f√ºr den Abschluss oder die Erf√ºllung eines Vertrags zwischen der betroffenen Person und dem Verantwortlichen erforderlich ist, oder (2) aufgrund von Rechtsvorschriften der Union oder der Mitgliedstaaten, denen der Verantwortliche unterliegt, zul√§ssig ist und diese Rechtsvorschriften angemessene Ma√ünahmen zur Wahrung der Rechte und Freiheiten sowie der berechtigten Interessen der betroffenen Person enthalten oder (3) mit ausdr√ºcklicher Einwilligung der betroffenen Person erfolgt. Ist die Entscheidung (1) f√ºr den Abschluss oder die Erf√ºllung eines Vertrags zwischen der betroffenen Person und dem Verantwortlichen erforderlich oder (2) erfolgt sie mit ausdr√ºcklicher Einwilligung der betroffenen Person, trifft Support++ angemessene Ma√ünahmen, um die Rechte und Freiheiten sowie die berechtigten Interessen der betroffenen Person zu wahren, wozu mindestens das Recht auf Erwirkung des Eingreifens einer Person seitens des Verantwortlichen, auf Darlegung des eigenen Standpunkts und auf Anfechtung der Entscheidung geh√∂rt. M√∂chte die betroffene Person Rechte mit Bezug auf automatisierte Entscheidungen geltend machen, kann sie sich hierzu jederzeit an unseren Datenschutzbeauftragten oder einen anderen Mitarbeiter des f√ºr die Verarbeitung Verantwortlichen wenden. i)      Recht auf Widerruf einer datenschutzrechtlichen Einwilligung Jede von der Verarbeitung personenbezogener Daten betroffene Person hat das vom Europ√§ischen Richtlinien- und Verordnungsgeber gew√§hrte Recht, eine Einwilligung zur Verarbeitung personenbezogener Daten jederzeit zu widerrufen. M√∂chte die betroffene Person ihr Recht auf Widerruf einer Einwilligung geltend machen, kann sie sich hierzu jederzeit an unseren Datenschutzbeauftragten oder einen anderen Mitarbeiter des f√ºr die Verarbeitung Verantwortlichen wenden. 20. Rechtsgrundlage der Verarbeitung Art. 6 I lit. a DS-GVO dient unserem Unternehmen als Rechtsgrundlage f√ºr Verarbeitungsvorg√§nge, bei denen wir eine Einwilligung f√ºr einen bestimmten Verarbeitungszweck einholen. Ist die Verarbeitung personenbezogener Daten zur Erf√ºllung eines Vertrags, dessen Vertragspartei die betroffene Person ist, erforderlich, wie dies beispielsweise bei Verarbeitungsvorg√§ngen der Fall ist, die f√ºr eine Lieferung von Waren oder die Erbringung einer sonstigen Leistung oder Gegenleistung notwendig sind, so beruht die Verarbeitung auf Art. 6 I lit. b DS-GVO. Gleiches gilt f√ºr solche Verarbeitungsvorg√§nge die zur Durchf√ºhrung vorvertraglicher Ma√ünahmen erforderlich sind, etwa in F√§llen von Anfragen zur unseren Produkten oder Leistungen. Unterliegt unser Unternehmen einer rechtlichen Verpflichtung durch welche eine Verarbeitung von personenbezogenen Daten erforderlich wird, wie beispielsweise zur Erf√ºllung steuerlicher Pflichten, so basiert die Verarbeitung auf Art. 6 I lit. c DS-GVO. In seltenen F√§llen k√∂nnte die Verarbeitung von personenbezogenen Daten erforderlich werden, um lebenswichtige Interessen der betroffenen Person oder einer anderen nat√ºrlichen Person zu sch√ºtzen. Dies w√§re beispielsweise der Fall, wenn ein Besucher in unserem Betrieb verletzt werden w√ºrde und daraufhin sein Name, sein Alter, seine Krankenkassendaten oder sonstige lebenswichtige Informationen an einen Arzt, ein Krankenhaus oder sonstige Dritte weitergegeben werden m√ºssten. Dann w√ºrde die Verarbeitung auf Art. 6 I lit. d DS-GVO beruhen. Letztlich k√∂nnten Verarbeitungsvorg√§nge auf Art. 6 I lit. f DS-GVO beruhen. Auf dieser Rechtsgrundlage basieren Verarbeitungsvorg√§nge, die von keiner der vorgenannten Rechtsgrundlagen erfasst werden, wenn die Verarbeitung zur Wahrung eines berechtigten Interesses unseres Unternehmens oder eines Dritten erforderlich ist, sofern die Interessen, Grundrechte und Grundfreiheiten des Betroffenen nicht √ºberwiegen. Solche Verarbeitungsvorg√§nge sind uns insbesondere deshalb gestattet, weil sie durch den Europ√§ischen Gesetzgeber besonders erw√§hnt wurden. Er vertrat insoweit die Auffassung, dass ein berechtigtes Interesse anzunehmen sein k√∂nnte, wenn die betroffene Person ein Kunde des Verantwortlichen ist (Erw√§gungsgrund 47 Satz 2 DS-GVO). 21. Berechtigte Interessen an der Verarbeitung, die von dem Verantwortlichen oder einem Dritten verfolgt werden Basiert die Verarbeitung personenbezogener Daten auf Artikel 6 I lit. f DS-GVO ist unser berechtigtes Interesse die Durchf√ºhrung unserer Gesch√§ftst√§tigkeit zugunsten des Wohlergehens all unserer Mitarbeiter und unserer Anteilseigner. 22. Dauer, f√ºr die die personenbezogenen Daten gespeichert werden Das Kriterium f√ºr die Dauer der Speicherung von personenbezogenen Daten ist die jeweilige gesetzliche Aufbewahrungsfrist. Nach Ablauf der Frist werden die entsprechenden Daten routinem√§√üig gel√∂scht, sofern sie nicht mehr zur Vertragserf√ºllung oder Vertragsanbahnung erforderlich sind. 23. Gesetzliche oder vertragliche Vorschriften zur Bereitstellung der personenbezogenen Daten; Erforderlichkeit f√ºr den Vertragsabschluss; Verpflichtung der betroffenen Person, die personenbezogenen Daten bereitzustellen; m√∂gliche Folgen der Nichtbereitstellung Wir kl√§ren Sie dar√ºber auf, dass die Bereitstellung personenbezogener Daten zum Teil gesetzlich vorgeschrieben ist (z.B. Steuervorschriften) oder sich auch aus vertraglichen Regelungen (z.B. Angaben zum Vertragspartner) ergeben kann. Mitunter kann es zu einem Vertragsschluss erforderlich sein, dass eine betroffene Person uns personenbezogene Daten zur Verf√ºgung stellt, die in der Folge durch uns verarbeitet werden m√ºssen. Die betroffene Person ist beispielsweise verpflichtet uns personenbezogene Daten bereitzustellen, wenn unser Unternehmen mit ihr einen Vertrag abschlie√üt. Eine Nichtbereitstellung der personenbezogenen Daten h√§tte zur Folge, dass der Vertrag mit dem Betroffenen nicht geschlossen werden k√∂nnte. Vor einer Bereitstellung personenbezogener Daten durch den Betroffenen muss sich der Betroffene an unseren Datenschutzbeauftragten wenden. Unser Datenschutzbeauftragter kl√§rt den Betroffenen einzelfallbezogen dar√ºber auf, ob die Bereitstellung der personenbezogenen Daten gesetzlich oder vertraglich vorgeschrieben oder f√ºr den Vertragsabschluss erforderlich ist, ob eine Verpflichtung besteht, die personenbezogenen Daten bereitzustellen, und welche Folgen die Nichtbereitstellung der personenbezogenen Daten h√§tte. 24. Bestehen einer automatisierten Entscheidungsfindung Als verantwortungsbewusstes Unternehmen verzichten wir auf eine automatische Entscheidungsfindung oder ein Profiling. Diese Datenschutzerkl√§rung wurde durch den Datenschutzerkl√§rungs-Generator der DGD Deutsche Gesellschaft f√ºr Datenschutz GmbH, die als Datenschutzbeauftragter t√§tig ist, in Kooperation mit der RC GmbH, die gebrauchte Computer wiederverwertet und der Kanzlei WILDE BEUGER SOLMECKE | Rechtsanw√§lte erstellt";

registerPlugin({
    
    name: 'Support++',
    version: '2.0.4.9-2 BETA',
    description: 'Advanced support script + ticket system + Telegram and Discord notification + channel rename',
    author: 'VerHext <support@allesverhext.de>',
    enableWeb: true,
    engines: '>= 0.10.7',

    vars: [{
            name: 'spWelcome',
            title: 'Welcome to the configuration of Support (v2). \n Thank you for choosing this script. \n\nPlease fill out all fields with (*), as these are relevant. \n\nIf you find a bug, then report it to the forum. \n\nI wish you much fun with Support ++'
          }, {
            name: 'spDatenschutz',
            title: DSGVO,
            type: 'select',
            options: ['Accept','Deny']
        }, {
            name: 'spLanguage',
            title: 'Select the language DE/EN',
            type: 'select',
            options: ['Deutsch (Version 2.0.5)','English'],
            conditions: [{
                field: 'spDatenschutz',
                value: 0
            }]
        }, {
            name: 'spSorryGermanNot',
            indent: 2,
            title: 'Sorry :/ but German is not available. But in the next version 2.0.5',
            conditions: [{
                field: 'spLanguage',
                value: 0
            },{
                field: 'spDatenschutz',
                value: 0
            } ]
        }, {
            name: 'spSupportChannels',
            indent: 2,
            title: 'Support Channels (*)',
            type: 'array',
            vars: [{
                name: 'spSupportChannel',
                indent: 1,
                title: 'Select the support channel that users enter when they need support (*)',
                type: 'channel'
            }, {
                name: 'spSupporterId',
                indent: 1,
                title: 'Supporter servergroup ID (*)',
                type: 'strings'
            }, {
                name: 'spSupportUserMessage',
                indent: 1,
                title: 'Message when a user joins (*)',
                placeholder: 'Hello &u, please wait. A supporter was informed [Variable &u = Username | &spI = Anzahl der Online Supporter (int)]',
                type: 'string'
            }, {
                name: 'spSupportMessage',
                indent: 1,
                title: 'Message to the supporter if a user needs help [Variable &u = Username] (*)',
                placeholder: 'User &u needs support!',
                type: 'string'
            }],
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spDatenschutz',
                value: 0
            } ],
        }, {
            name: 'spIgnoreId',
            indent: 2,
            title: 'Ignore servergroup ID (*)',
            type: 'strings',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spDatenschutz',
                value: 0
            }]
        }, {
            name: 'spAfkChannels',
            indent: 2,
            title: 'AFK Channels - ignore Supporter... (*)',
            type: 'array',
            vars: [{
                name: 'spAfkChannel',
                title: 'AFK Channel ignore Supporters. (*)',
                type: 'channel'
           },{
                name: 'spAfkChannelSub',
                title: 'Ignore all sub channels... (for big server)',
                type: 'checkbox'
            }],
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spDatenschutz',
                value: 0
            }]

        }, {
            name: 'spSupportUserNoMessage',
            indent: 2,
            title: 'Response when there\'s no supporter online [Variable &u = Username] (*)',
            placeholder: 'Sorry &u but no supporter are online!',
            type: 'string',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spDatenschutz',
                value: 0
            } ]
        }, {
            name: 'spSupportUserIgnoreMessage',
            indent: 2,
            title: 'Message to ignored users [Variable &u = Username] (*)',
            placeholder: 'Sorry &u but you on the ignore list.',
            type: 'string',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spDatenschutz',
                value: 0
            }]
        }, {
            name: 'spMsgMode_user',
            title: 'Notification mode user (*)',
            type: 'select',
            options: ['Poke', 'Chat'],
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spDatenschutz',
                value: 0
            }]
        },{
            name: 'spMsgMode_sp',
            title: 'Notification mode supporter',
            type: 'select',
            options: ['Poke', 'Chat'],
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spDatenschutz',
                value: 0
            }]
        },
        //------------------------------------------------------------------- {Module Config} ---------------------------------------------------------------------------------
        {
            name: 'spModule',
            title: 'Support++ module. Activate the modul with the Checkbox.',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spDatenschutz',
                value: 0
            } ]
        },
/*
        //                         -> Support++ API
        {
            name: 'spAPIActiv',
            indent: 2,
            title: '[Support++] Use a powerful cross-platform Support API.',
            type: 'checkbox',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spDatenschutz',
                value: 0
            } ]
        },{
            name: 'spInfoAPI',
            indent: 4,
            title: "Why should I use an external API?  That's a good question ... I'll explain it to you ... Check it out on the website https://support-pp.de/api",
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },{
                    field: 'spAPIActiv',
                    value: true
                },{
                    field: 'spDatenschutz',
                    value: 0
            }]
        }, {
            name: 'spInfoAPI2',
            indent: 4,
            title: "[Disclaimer] The Support++ API is a external and independently API. it allows us to extend the script scope. Our API is developed under the highest privacy policy. Your data is secure thanks to AWS databases and accessible online at any time. However, we assume no liability for this API.",
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },{
                    field: 'spAPIActiv',
                    value: true
                },{
                    field: 'spDatenschutz',
                    value: 0
            }]
        }, {
            name: 'spAPIToken',
            indent: 4,
            title: "[Support++ API] That's the only thing we want to know :) Please enter your API token from https://register.support-pp.de ",
            type: 'password',
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },{
                    field: 'spAPIActiv',
                    value: true
                },{
                    field: 'spDatenschutz',
                    value: 0
            }]
        }, 
*/

        //                        -> MySQL
        {
            name: 'spMySQLActiv',
            indent: 2,
            title: '[MySQL] Advanced storage for Module',
            type: 'checkbox',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spDatenschutz',
                value: 0
            } ]
        },{
            name: 'spDBINFO',
            indent: 4,
            title: 'This module connect the Sinusbot with your MySQL DB. The Module create automatic table!',
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },{
                    field: 'spMySQLActiv',
                    value: true
                },{
                    field: 'spDatenschutz',
                    value: 0
            }]
        }, {
            name: 'spHost',
            indent: 4,
            title: 'Database host. (PRO: db.support-pp.de)',
            placeholder: '49.145.xx.xx or domain ',
            type: 'string',
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },{
                    field: 'spMySQLActiv',
                    value: true
                },{
                    field: 'spDatenschutz',
                    value: 0
            }]
        }, {
            name: 'spUsername',
            indent: 4,
            title: 'Database username (Please use not the root account!)',
            placeholder: 'Support-pp',
            type: 'string',
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },{
                    field: 'spMySQLActiv',
                    value: true
                },{
                    field: 'spDatenschutz',
                    value: 0
            }]
        }, {
            name: 'spPassword',
            indent: 4,
            title: 'Database password (Pleas use only account with password!)',
            placeholder: 'xxxxxxxxxxxxxxxxx',
            type: 'string',
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },{
                    field: 'spMySQLActiv',
                    value: true
                },{
                    field: 'spDatenschutz',
                    value: 0
            }]
        }, {
            name: 'spDB',
            indent: 4,
            title: 'Database name (PRO: sp_)',
            placeholder: 'SinusbotSupportSorage',
            type: 'string',
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },{
                    field: 'spMySQLActiv',
                    value: true
                },{
                    field: 'spDatenschutz',
                    value: 0
            }]
        },{
            name: 'spDBPROINFO',
            indent: 4,
            title: '[ i ] You have no MySQL DB? All PRO members receive a free DB from us. You have received the access data from your donation confirmation mail. Questions? Please contact us.',
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },{
                    field: 'spMySQLActiv',
                    value: true
                },{
                    field: 'spDatenschutz',
                    value: 0
            }]
        }, 
        


        //                         -> Ticket
        {
            name: 'spTicketActiv',
            indent: 2,
            title: '[TicketSystem] TicketSystem Advanced and Minimal. Managed your Tickets with a webpanal... [NEW] ',
            type: 'checkbox',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spDatenschutz',
                value: 0
            } ]
        }, {
            name: 'spTicketCommand',
            indent: 4,
            title: 'Command to send a ticket (e.g !ticket)',
            placeholder: '!t | !ticket | !tr ...',
            type: 'string',
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },
                {
                    field: 'spTicketActiv',
                    value: true
                },{
                field: 'spDatenschutz',
                value: 0
            }
            ]
        }, {
            name: 'spTicketSendMsg',
            indent: 4,
            title: 'Ticket confirmation message [Variable &u = Username]',
            placeholder: 'Your ticket has been sent',
            type: 'string',
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },
                {
                    field: 'spTicketActiv',
                    value: true
                },{
                field: 'spDatenschutz',
                value: 0
            }
            ]
        }, {
            name: 'spNewTicketMsg',
            indent: 4,
            title: 'Message when a supporter gets a new ticket [Variable &u = Username, &client = Client[Object] ]',
            placeholder: 'New ticket from &u !',
            type: 'string',
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },
                {
                    field: 'spTicketActiv',
                    value: true
                },{
                field: 'spDatenschutz',
                value: 0
            }
            ]
        }, {
            name: 'spTicketLargeActiv',
            indent: 4,
            title: '[WebInterface] Whould you use a powerfull webinterface to managed your tickets? [REQUIRE MySQL] [REQUIRE WEB][NEW] ',
            type: 'checkbox',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                    field: 'spTicketActiv',
                    value: true
                },{
                field: 'spDatenschutz',
                value: 0
            } ]
        },
        //                          Ticket  <-


        //                        -> Telegram

        {
            name: 'spTelegramActiv',
            indent: 2,
            title: '[TelegramNotification] Notification via Telegram?',
            type: 'checkbox',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spDatenschutz',
                value: 0
            } ]
        }, {
            name: 'spTelegramModeTicket',
            indent: 4,
            title: 'Ticket notification mode via Telegram',
            type: 'select',
            options: ['Always', 'When no supporter online', 'Never'],
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },
                {
                    field: 'spTelegramActiv',
                    value: true
                },{
                field: 'spDatenschutz',
                value: 0
            }
            ]
        }, {
            name: 'spTelegramModeSupport',
            indent: 4,
            title: 'Support notification mode via Telegram',
            type: 'select',
            options: ['Always', 'When no supporter online', 'Never'],
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },
                {
                    field: 'spTelegramActiv',
                    value: true
                },{
                field: 'spDatenschutz',
                value: 0
            }
            ]
        }, {
            name: 'spTelegramID',
            indent: 4,
            title: 'Telegram ChatId',
            placeholder: '123456789',
            type: 'string',
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },
                {
                    field: 'spTelegramActiv',
                    value: true
                },{
                field: 'spDatenschutz',
                value: 0
            }
            ]
        }, {
            name: 'spTelegramToken',
            indent: 4,
            title: 'Telegram Bot token',
            placeholder: '987654321',
            type: 'password',
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },
                {
                    field: 'spTelegramActiv',
                    value: true
                },{
                field: 'spDatenschutz',
                value: 0
            }
            ]
        }, {
            name: 'spTelegrammTextSupport',
            indent: 4,
            title: 'Support | Telegramm message [Variables: &u = username]',
            placeholder: 'Hello support team,\n\n User &u joined the supportroom and needs support.\n\n Help yould be appreciated!\n Thanks ;)',
            type: 'multiline',
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },
                {
                    field: 'spTelegramActiv',
                    value: true
                },{
                field: 'spDatenschutz',
                value: 0
            }
            ]
        }, {
            name: 'spTelegrammTextTicket',
            indent: 4,
            title: 'Ticket | Telegramm message [Variables: &u = username | &msg = message | &u_id = uid | &u_ip = ip]',
            placeholder: 'Hello supporter,\n\n new ticket:\nname: &u\nmessage: &msg\n\n Please answer the ticket, thanks ;)',
            type: 'multiline',
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },
                {
                    field: 'spTelegramActiv',
                    value: true
                },{
                field: 'spDatenschutz',
                value: 0
            }

            ]
        },

        //                        Telegram <-

        //                        -> Discord

        {
            name: 'spDiscordActiv',
            indent: 2,
            title: '[DiscordNotification] Notification via Discord? [DSGVO] F√ºr diese Modul werde personenbezogene Daten an das Projekt Support++ √ºbermittelt. Hierbei handelt es sich um (IP (server), UUID, Nachricht)',
            type: 'checkbox',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spDatenschutz',
                value: 0
            } ]
        }, {
            name: 'spDiscordModeTicket',
            indent: 4,
            title: 'Ticket notification mode via Discord',
            type: 'select',
            options: ['Always', 'When no supporter online', 'Never'],
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },
                {
                    field: 'spDiscordActiv',
                    value: true
                },{
                field: 'spDatenschutz',
                value: 0
            }
            ]
        }, {
            name: 'spDiscordModeSupport',
            indent: 4,
            title: 'Support notification mode via Discord',
            type: 'select',
            options: ['Always', 'When no supporter online', 'Never'],
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },
                {
                    field: 'spDiscordActiv',
                    value: true
                },{
                field: 'spDatenschutz',
                value: 0
            }
            ]
        }, {
            name: 'spTicketResponseToken',
            indent: 4,
            title: '[PRO feature] Discord replay token (/id) You can replay with "/replay <ticket nr> msg"',
            placeholder: '*************',
            type: 'password',
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },{
                    field: 'spDiscordActiv',
                    value: true
                },{
                    field: 'spTicketActiv',
                    value: true
                },{
                field: 'spDatenschutz',
                value: 0
            }
            ]
        }, {
            name: 'spDiscordID',
            indent: 4,
            title: 'Discord ChatId',
            placeholder: '123456789',
            type: 'string',
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },
                {
                    field: 'spDiscordActiv',
                    value: true
                },{
                field: 'spDatenschutz',
                value: 0
            }
            ]
        }, {
            name: 'spDiscordToken',
            indent: 4,
            title: 'Discord Bot token',
            placeholder: '987654321',
            type: 'string',
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },
                {
                    field: 'spDiscordActiv',
                    value: true
                },{
                field: 'spDatenschutz',
                value: 0
            }
            ]
        }, {
            name: 'spDiscordTextSupport',
            indent: 4,
            title: 'Support | Discord message [Variables: &u = username]',
            placeholder: 'Hello support team,\n\n User &u joined the supportroom and needs support.\n\n Help yould be appreciated!\n Thanks ;)',
            type: 'multiline',
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },
                {
                    field: 'spDiscordActiv',
                    value: true
                },{
                field: 'spDatenschutz',
                value: 0
            }
            ]
        }, {
            name: 'spDiscordTextTicket',
            indent: 4,
            title: 'Ticket | Discord message [Variables: &u = username | &msg = message | &u_id = uid | &u_ip = ip]',
            placeholder: 'Hello supporter,\n\n new ticket:\nname: &u\nmessage: &msg\n\n Please answer the ticket, thanks ;)',
            type: 'multiline',
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },
                {
                    field: 'spDiscordActiv',
                    value: true
                },{
                field: 'spDatenschutz',
                value: 0
            }

            ]
        },

        //                        Discord <-


        //                        -> ChannelEdit
          {
            name: 'spChannelEditActiv',
            indent: 2,
            title: '[ChannelEdit] Edit you Channel',
            type: 'checkbox',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spDatenschutz',
                value: 0
            }]
        
        },{
            name: 'spChanneleditInfoTutorial',
            indent: 2,
            title: 'The new ChannelEdit System. This module is now work with "parameter"! You can now open / close every channel with the command: <!offline> <parameter> IDEA: A example parameter is "ts" = "!online ts"',
             conditions: [{
                    field: 'spLanguage',
                    value: 1
                },{
                    field: 'spChannelEditActiv',
                    value: true
                },{
                    field: 'spDatenschutz',
                    value: 0
                }],
        },{
            name: 'spSupportChannelCommandOpen',
            indent: 2,
            title: 'Channel open command.',
            placeholder: '!online',
            type: 'string',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spChannelEditActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
            }]                
        }, {
            name: 'spSupportChannelCommandClose',
            indent: 2,
            title: 'Channel close command.',
            placeholder: '!offline',
            type: 'string',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spChannelEditActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
            }] 
        }, {
            name: 'spChannelEdit',
            indent: 2,
            title: 'ChannelEdit',
            type: 'array',
            vars: [

        {
            name: 'spSupportChannelNameOnlineMsg',
            indent: 1,
            title: 'Channel name when support is open (!online)',
            placeholder: '[cspacer]Support [Online]',
            type: 'string',
        }, {
            name: 'spSupportChannelNameOnlinDescription',
            indent: 1,
            title: 'Channel description when support is open (!online)',
            placeholder: 'Support channel is open.',
            type: 'multiline',
        }, {
            name: 'spSupportChannelMaxClientsOnline',
            indent: 1,
            title: 'Change the maxClints when Online.',
            placeholder: '10',
            type: 'number',
            
        }, {
              name: 'spSupportChannelNameOfflineMsg',
            indent: 1,
            title: 'Channel name when support is closed (!offline)',
            placeholder: '[cspacer]Support [Offline]',
            type: 'string',
        }, {
            name: 'spSupportChannelNameOfflineDescription',
            indent: 1,
            title: 'Channel description when support is closed (!offline)',
            placeholder: 'Support channel is closed.',
            type: 'multiline',
        }, {
            name: 'spSupportChannelMaxClientsOffline',
            indent: 1,
            title: 'Change the maxClints when Offline.',
            placeholder: '0',
            type: 'number',
            
        }, {

            name: 'spSupportChannelNameChange',
            indent: 1,
            title: 'The channel shat should be renamed',
            type: 'channel',
        },{
            name: 'spSupportChannelSupporterId',
            indent: 1,
            title: "Supporter Id's for selected Channel.",
            type: 'strings',
       },{
            name: 'spSupportChannelPasswordActiv',
            indent: 1,
            title: 'Close Offline Channel with Password. (No User can join.)',
            type: 'select',
            options: ['Yes', 'NO'],
       },{
            name: 'spSupportChannelKickActiv',
            indent: 1,
            title: 'If channel closed kick all waited user out? (only one)',
            type: 'select',
            options: ['Yes', 'NO'],
           },{
            name: 'spSupportChannelPrefix',
            indent: 1,
            title: 'Support channel parameter (*)',
            placeholder: 'ts //open the channel with !online ts',
            type: 'string',
       }
            
            ],
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
            field: 'spChannelEditActiv',
            value: true
        },{
                field: 'spDatenschutz',
                value: 0
            }],
        },
        {
             name: 'spSupportChannelSupporterId',
            indent: 3,
            title: 'Default Supporter Id. Can change all Channel.',
            type: 'strings',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spChannelEditActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
            }]
       },

        


        //                        ChannelEdit <-

         //                        -> Automatic Channel Manager

         {
            name: 'spAutomaticChannelManager',
            indent: 2,
            title: '[Automatic Channel Manager] Close and Open your Channel Autmoatic',
            type: 'checkbox',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spChannelEditActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
            }]
        },{
             name: 'spSupportChannelOpenAutomatic',
            indent: 3,
            title: 'The channel Open Automatic, when Supporter are online.',
            type: 'checkbox',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spAutomaticChannelManager',
                value: true
            },{
                field: 'spChannelEditActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
            }]
        },{
            name: 'spSupportChannelCloseAutomatic',
            indent: 3,
            title: 'The channel Close Automatic, when no Supporter online / afk. ',
            type: 'checkbox',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spAutomaticChannelManager',
                value: true
            },{
                field: 'spChannelEditActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
            }]
        },


        //                        -> Time  
        
        
        {
            name: 'spTimeChannelManagerActiv',
            indent: 2,
            title: '[Time Channel Manager] Close and Open your Channel on Time',
            type: 'checkbox',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spChannelEditActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
            }]
        }, {
            name: 'spTimeZo',
            indent: 3,
            title: 'Select your time zone. Check the time with !time.',
            type: 'select',
            options: [
                'UTC-12:00',
                'UTC-11:00',
                'UTC-10:00',
                'UTC-09:30',
                'UTC-09:00',
                'UTC-08:00',
                'UTC-07:00',
                'UTC-06:00',
                'UTC-05:00',
                'UTC-04:30',
                'UTC-04:00',
                'UTC-03:30',
                'UTC-03:00',
                'UTC-02:00',
                'UTC-01:00',
                'UTC-00:00',
                'UTC+01:00',
                'UTC+02:00',
                'UTC+03:00',
                'UTC+03:30',
                'UTC+04:00',
                'UTC+04:30',
                'UTC+05:00',
                'UTC+05:30',
                'UTC+05:45',
                'UTC+06:00',
                'UTC+06:30',
                'UTC+07:00',
                'UTC+08:00',
                'UTC+08:30',
                'UTC+08:45',
                'UTC+09:00',
                'UTC+09:30',
                'UTC+10:00',
                'UTC+10:30',
                'UTC+11:00',
                'UTC+12:00',
                'UTC+12:45',
                'UTC+13:00',
                'UTC+14:00'
            ],
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spChannelEditActiv',
                value: true
            } ,{
                field: 'spTimeChannelManagerActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
            }]
        },{
            name: 'spTimeChannelManager',
            indent: 2,
            title: 'Select yout Time',
            type: 'array',
            vars: [{
                name: 'spTimePrefix',
                indent: 1,
                title: 'Your ChannelEdit parameter from the Module ChannelEdit! (*).',
                type: 'string'
            }, {
                name: 'spTime',
                indent: 1,
                title: 'Select the time for a action.',
                placeholder: '17:00 or 09:00',
                type: 'string'
            }, {
                name: 'spTimeAction',
                indent: 1,
                title: 'Select the action on this Time. Open or Close?',
                type: 'select',
                options: ['open Channel', 'close channel'],
            }],
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spChannelEditActiv',
                value: true
            } ,{
                field: 'spTimeChannelManagerActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
            }]
        }
        

        //                        -> Queue

        ,{
            name: 'spQueueActiv',
            indent: 2,
            title: '[Queue] Play Music for waiting User...',
            type: 'checkbox',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spDatenschutz',
                value: 0
            } ]
        },{
            name: 'spQueueOwnActiv',
            indent: 4,
            title: 'Use your own Music / Soundsfile.!',
            type: 'checkbox',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spQueueActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
            } ]
        },
        
        //Start audio von stram server!

                {
             name: 'spQueueTrackOffline',
            indent: 4,
            title: 'Sound file (supporter offline): ',
            placeholder: 'Search for track...',
            type: 'track',
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },
                {
                    field: 'spQueueActiv',
                    value: true
                },
                {
                    field: 'spQueueOwnActiv',
                    value: true
                },{
                field: 'spDatenschutz',
                value: 0
            }
            ]
        },  {
            name: 'spQueueTrackOnline',
            indent: 4,
            title: 'Sound file (supporter online): ',
            placeholder: 'Search for track...',
            type: 'track',
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },
                {
                    field: 'spQueueActiv',
                    value: true
                },
                {
                    field: 'spQueueOwnActiv',
                    value: true
                },{
                field: 'spDatenschutz',
                value: 0
            }
            ]
        },  {

            name: 'best_thanks_006mi4',
            indent: 0,
            title: '-> Special thanks for the professional sound records to 006mi4. Check out his website: https://vcircle.eu/',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spQueueActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
            }]
        },{
            name: 'spQueueText0',
            indent: 4,
            title: '[DE] Support Offline',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spQueueActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
            } ]
         }, {
        
            name: 'Support_Offline_FAQ_Musik',
            indent: 6,
            title: '[1] FAQ mit Musik (02:17 min)',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spQueueActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
            }
            ]
        },
        {
            name: 'Support_Offline_Lite_DE',
            indent: 6,
            title: '[2] Lite (00:11 min)',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spQueueActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
            }]
        },
        {
            name: 'Support_Offline_Lite_Dunkle_Stimme',
            indent: 6,
            title: '[3] Lite Dunkle Stimme (00:07 min)',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spQueueActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
            } ]
        },
        {
            name: 'Support_Offline_Lite_Helle_Stimme',
            indent: 6,
            title: '[4] Lite Helle Stimme (00:09 min)',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spQueueActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
            } ]
        },
        {
            name: 'Support_Offline_Lite_Langame_Stimme',
            indent: 6,
            title: '[5] Lite Langsamme Stimme (00:09 min)',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spQueueActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
            } ]
        },
                {
            name: 'Support_Offline_Lite_Musik',
            indent: 6,
            title: '[6] Lite mit Musik (03:31 min)',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spQueueActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
            }]
        },
         {
            name: 'spQueueText1',
            indent: 4,
            title: '[DE] Support Online',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spQueueActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
            } ]
        },
        {
            name: 'Support_Online_FAQ_DE',
            indent: 6,
            title: '[7] FAQ ohne Musik (00:21 min)',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spQueueActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
            }]
        },
        {
            name: 'Support_Online_FAQ_Musik',
            indent: 6,
            title: '[8] FAQ mit Musik (02:16 min)',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spQueueActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
            }]
        },
        {
            name: 'Support_Online_Funny_EricCartman',
            indent: 6,
            title: '[9] Funny EricCartman (00:10 min)',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spQueueActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
            }]
        },
                {
            name: 'Support_Online_Funny_EricCartman_Musik',
            indent: 6,
            title: '[10] Funny EricCartman mit Musik (02:48 min)',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spQueueActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
            }]
        },
        {
            name: 'Support_Online_Lite_Mitarbeiter',
            indent: 6,
            title: '[11] Lite Mitarbeiter (00:10 min)',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spQueueActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
            }]
        },
         {
            name: 'Support_Online_Lite_Mitarbeiter_Gespr√§ch',
            indent: 6,
            title: '[12] Lite Mitarbeiter Gespr√§ch (00:05 min)',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spQueueActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
            }]
        },
         {
            name: 'Support_Online_Lite_Supporter',
            indent: 6,
            title: '[13] Lite Supporter (00:10 min)',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spQueueActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
            }]
        },
          {
            name: 'Support_Online_Lite_Supporter_Gespr√§ch',
            indent: 6,
            title: '[14] Lite Supporter Gespr√§ch (00:05 min)',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spQueueActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
            }]
        },
       {
            name: 'Support_Online_Lite_Supporter_Gespr√§ch_Musik',
            indent: 6,
            title: '[15] Lite Supporter Gespr√§ch Musik (02:41 min)',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spQueueActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
            }]
        },
        //Willkommen

        
        {
            name: 'spQueueText2',
            indent: 4,
            title: '[DE] Willkommen',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spQueueActiv',
                value: true
            } ,{
                field: 'spDatenschutz',
                value: 0
            }]
        },
        {
            name: 'Willkommen_Lite',
            indent: 6,
            title: '[16] Lite  (00:19 min)',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spQueueActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
            }]
        },
        {
            name: 'Willkommen_Regeln_Funny_Musik',
            indent: 6,
            title: '[17] Regeln Funny Musik (01:38 min)',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spQueueActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
            }]
        },
                {
            name: 'Willkommen_Regeln_Happy',
            indent: 6,
            title: '[18] Regeln Happy (00:14 min)',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spQueueActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
            }]
        },
                        {
            name: 'Willkommen_Regeln_Happy_Musik',
            indent: 6,
            title: '[19] Regeln Happy Musik (02:20 min)',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spQueueActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
            }]
        },
          {
            name: 'Willkommen_Regeln_Webseite_Musik_1',
            indent: 6,
            title: '[20] Regeln Webseite Musik 1 (02:16 min)',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spQueueActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
            }]
        },
        {
            name: 'Willkommen_Regeln_Webseite_Musik_2',
            indent: 6,
            title: '[21] Regeln Webseite Musik 2 (02:17 min)',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spQueueActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
            }]
        },
        {
            name: 'spQueueText3',
            indent: 4,
            title: '[EN] Support',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spQueueActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
            } ]
        },
    
        {
            name: 'Support_Offline_Lite',
            indent: 6,
            title: '[22] Lite Funny (00:11 min)',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spQueueActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
            }]
        },
          {
            name: 'Support_Offline_Liste_Music',
            indent: 6,
            title: '[23] Lite Funny Music (03:55 min)',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spQueueActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
            }]
        },
       {
            name: 'spSelectMusic',
            indent: 1,
            title: 'Select the nummber of the Online Song.',
            placeholder: '2',
            type: 'number',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spQueueActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
            }]
        }, {
            name: 'spSelectMusicOffline',
            indent: 1,
            title: 'Select the nummber of the Offline Song.',
            placeholder: '2',
            type: 'number',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spQueueActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
            }]
        }, {
            name: 'best_thanks_006mi4_2',
            indent: 0,
            title: '-> Special thanks for the professional sound records to 006mi4. Check out his website: https://vcircle.eu/',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spQueueActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
            }]
        },
        {

            name: 'spQueueVolumen',
            indent: 4,
            title: 'Select the Volumen: ',
            placeholder: '60',
            type: 'number',
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },
                {
                    field: 'spQueueActiv',
                    value: true
                },{
                field: 'spDatenschutz',
                value: 0
            }

            ]
        }, {
            name: 'spQueueResume',
            indent: 4,
            title: 'Resume the last music after Queue track?',
            type: 'checkbox',
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },
                {
                    field: 'spQueueActiv',
                    value: true
                },{
                field: 'spDatenschutz',
                value: 0
            }
            ]
        },
        {
            name: 'spQueueMove',
            indent: 4,
            title: 'Move the Bot in the Support Channel? (Buggy!)',
            type: 'checkbox',
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },
                {
                    field: 'spQueueActiv',
                    value: true
                },{
                field: 'spDatenschutz',
                value: 0
            }
            ]
        },


        //                        -> Queue

        //                        -> AntiFlood

        {
            name: 'spAntiFloodActiv',
            indent: 2,
            title: '[AntiFlood] AntiFlood Protection',
            type: 'checkbox',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spDatenschutz',
                value: 0
            }]
        }, {
            name: 'spAntiFloodInfo',
            indent: 4,
            title: 'This Modul, protect you Ticket / Support Bot for AntiFlood. (WARNING: This module use the store.)',
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },
                {
                    field: 'spAntiFloodActiv',
                    value: true
                },{
                field: 'spDatenschutz',
                value: 0
            }
            ]
        }, {
            name: 'spAntiFloodPointsReduce',
            indent: 4,
            title: 'Reduce points per minute',
            placeholder: '5',
            type: 'number',
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },
                {
                    field: 'spAntiFloodActiv',
                    value: true
                },{
                field: 'spDatenschutz',
                value: 0
            }
            ]
        }, {
            name: 'spAntiFloodPointsLimit',
            indent: 4,
            title: 'Points to lock the user',
            placeholder: '60',
            type: 'number',
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },
                {
                    field: 'spAntiFloodActiv',
                    value: true
                },{
                field: 'spDatenschutz',
                value: 0
            }
            ]
        }, {
            name: 'spAntiFloodPointsTicket',
            indent: 4,
            title: 'Points for each ticket',
            placeholder: '20',
            type: 'number',
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },
                {
                    field: 'spAntiFloodActiv',
                    value: true
                },{
                field: 'spDatenschutz',
                value: 0
            }
            ]
        }, {
            name: 'spAntiFloodPointsSupport',
            indent: 4,
            title: 'Points for each support request',
            placeholder: '20',
            type: 'number',
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },
                {
                    field: 'spAntiFloodActiv',
                    value: true
                },{
                field: 'spDatenschutz',
                value: 0
            }
            ]
        },

        //                         AntiFlood <-


        //                        -> Themen Notification

       {
            name: 'spThemenNotificationActiv',
            indent: 2,
            title: '[ThemenNotification] Notification the themen Supporter',
            type: 'checkbox',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spDatenschutz',
                value: 0
            } ]
        }, {
             name: 'spThemen',
            indent: 4,
            title: 'Define the Notification Thema.',
            placeholder: '2',
            type: 'array',
            vars: [{
                name: 'spThemaName',
                indent: 1,
                title: 'Select the themen name.',
                type: 'string'
            }, {
                name: 'spThemaId',
                indent: 1,
                title: 'Select the themen id.',
                type: 'number'
            }, {
                name: 'spThemaSupporterGroups',
                indent: 1,
                title: 'Supporter servergroup ID for the thema',
                type: 'strings'
            }],
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spThemenNotificationActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
            }],    
        }, {
            name: 'spThemenMessageSupporter',
            indent: 4,
            title: 'Message Supporter [Variable &u = User, &thema = Thema]',
            placeholder: 'Hey the User &u, need Support in the special Thema &thema !  ',
            type: 'string',
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },
                {
                    field: 'spThemenNotificationActiv',
                    value: true
                },{
                field: 'spDatenschutz',
                value: 0
            }
            ]
        }, {
            name: 'spThemenMessageUser',
            indent: 4,
            title: 'Message User [Variable &u = User, &thema = Thema]',
            placeholder: 'Please wait &u, a special Supporter for the Thema &thema is called.  ',
            type: 'string',
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },
                {
                    field: 'spThemenNotificationActiv',
                    value: true
                },{
                field: 'spDatenschutz',
                value: 0
            }
            ]
        },{
            name: 'spThemenMessage',
            indent: 4,
            title: 'Select the themen Message. [Variable &themen-array = Array with all Themen + numbern]',
            placeholder: 'Please select a themen number... \n &themen-array',
            type: 'multiline',
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },
                {
                    field: 'spThemenNotificationActiv',
                    value: true
                },{
                field: 'spDatenschutz',
                value: 0
            }
            ]
        },

        //                        -> Prefix

        {
            name: 'spPrefixActiv',
            indent: 2,
            title: '[Prefix] Change the default Prefix (z.B. Support |) (v2.0.0)',
            type: 'checkbox',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spDatenschutz',
                value: 0
            } ]
        }, {
            name: 'spPrefixTicketReplay',
            indent: 4,
            title: 'Change the ticket replay prefix [PRO version]',
            placeholder: '[B]Ticket replay | [/B]',
            type: 'string',
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },
                {
                    field: 'spPrefixActiv',
                    value: true
                },{
                field: 'spDatenschutz',
                value: 0
            }
            ]
        }, {
            name: 'spPrefixTicket',
            indent: 4,
            title: 'Change the ticket prefix',
            placeholder: '[B]Ticket | [/B]',
            type: 'string',
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },
                {
                    field: 'spPrefixActiv',
                    value: true
                },{
                field: 'spDatenschutz',
                value: 0
            }
            ]
        }, {
            name: 'spPrefixSupport',
            indent: 4,
            title: 'Change the support prefix',
            placeholder: '[B]Support | [/B]',
            type: 'string',
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },
                {
                    field: 'spPrefixActiv',
                    value: true
                },{
                field: 'spDatenschutz',
                value: 0
            }
            ]
        }, {
            name: 'spPrefixFeedback',
            indent: 4,
            title: 'Change the feedback prefix',
            placeholder: '[B][Feedback][/B]',
            type: 'string',
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                },
                {
                    field: 'spPrefixActiv',
                    value: true
                },{
                field: 'spDatenschutz',
                value: 0
            }
            ]
        },
        

        //                         Prefix <-

        //                          -> Feedback
        {
            name: 'spFeedbackActiv',
            indent: 2,
            title: '[Feedback] Get Feedback after a Support talk. [YOU NEED MySQL] ',
            type: 'checkbox',
            conditions: [{
                field: 'spLanguage',
                value: 1
            },{
                field: 'spDatenschutz',
                value: 0
            } ]
        }, {
            name: 'spFeedbackQuestions',
            indent: 4,
            title: 'Set the Questions (TIPP: The Questions must answeared with stars.)',
            type: 'array',
            vars: [{
                        name: 'spFeedbackQuestion',
                        indent: 4,
                        title: 'Set the Question',
                        placeholder: 'How satisfied are you with the supporter?',
                        type: 'string',
                    }
            ],
            conditions: [{
                    field: 'spLanguage',
                    value: 1
                }, {
                    field: 'spFeedbackActiv',
                    value: true
                },{
                    field: 'spDatenschutz',
                    value: 0
            }]
    }, {  
        name: 'msg_feedback_openFeedbakSession',
        indent: 4,
        title: '[MSG] Welcome message. Start with the feedback system',
        placeholder: 'Welcome to the Feedback System! Please help use with your resion! Thanks!',
        type: 'string',
        conditions: [{
                field: 'spLanguage',
                value: 1
            }, {
                field: 'spFeedbackActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
        }]
    }, {  
        name: 'msg_feedback_errorFeedbakSession',
        indent: 4,
        title: '[MSG] User press a unallow key',
        placeholder: 'Sorry, please complete the feedback or exit with !exit',
        type: 'string',
        conditions: [{
                field: 'spLanguage',
                value: 1
            }, {
                field: 'spFeedbackActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
        }]
    }, {  
        name: 'msg_feedback_closeFeedbakSession',
        indent: 4,
        title: '[MSG] Close the Feedback session',
        placeholder: 'Oh, ok we close your feedback session :/',
        type: 'string',
        conditions: [{
                field: 'spLanguage',
                value: 1
            }, {
                field: 'spFeedbackActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
        }]
    }, {  
        name: 'msg_feedback_closeFeedbakSessionOk',
        indent: 4,
        title: '[MSG] Finnish the Feedback session. Thanks for the participation',
        placeholder: 'Thank you for the Feedback!',
        type: 'string',
        conditions: [{
                field: 'spLanguage',
                value: 1
            }, {
                field: 'spFeedbackActiv',
                value: true
            },{
                field: 'spDatenschutz',
                value: 0
        }]
    },

        {
            name: 'spCopyright',
            title: 'This Script is created by VerHext. This work is licensed under the Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License. Remove any Watermarks is deny.'
        }
    ]
}, function(sinusbot, config, info) {


//--------------------------------------------------- {Variablen} -----------------------------------------------------------

var message_channeledit_kickreason
var message_channeledit_all_closed
var message_channeledit_all_open
var message_channeledit_closed
var message_channeledit_open;
var message_antiflood_blocked;
var message_channeledit_no_permission_all;
var message_channeledit_no_permission;


//||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

//Here are a list of all system message. You can change the msg into the "...". Thanks.
if (config.spLanguage == 0){
   // German Message...
    message_channeledit_kickreason = "Der Supportchannel ist geschlo√üen.";
    message_channeledit_all_closed = "B]ChannelEdit | [/B] Alle Support Channel sind nun geschlossen.";
    message_channeledit_all_open = "B]ChannelEdit | [/B] Alle Support Channel sind nun ge√∂ffnet.";
    message_channeledit_closed = "[B]ChannelEdit | [/B] Der Support Channel ist nun geschlossen.";
    message_channeledit_open = "[B]ChannelEdit | [/B] Der Support Channel ist nun ge√∂ffnet.";
    message_antiflood_blocked = "[color=#aa0000][b][Support++] Diese aktion ist momentan nicht zul√§assig aufgrund der Spam Protection. Versuche es in ein paar Sekunden erneut.[/b][/color]";
    message_channeledit_no_permission_all = "[color=#aa0000][b][Support++] Du besitzt keine Berechtigung alle support Channel zu bearbeiten! Trage deine Server Id in das Feld: 'Default Supporter Id. Can change all Channel.' [/b][/color]";
    message_channeledit_no_permission = "[color=#aa0000][b][Support++] Du besitzt keine Berechtigung den support Channel '&channel' zu bearbeiten! Trage deine Server Id in das Feld: 'Supporter Id's for selected Channel.' [/b][/color]";

}else if (config.spLanguage == 1){

    // Englisch Message...
    message_channeledit_kickreason = "The Supportchannel are closed.";
    message_channeledit_all_closed = "[B]ChannelEdit | [/B] All Support Channel are now closed";
    message_channeledit_all_open = "[B]ChannelEdit | [/B] All Support Channel are now open";
    message_channeledit_closed = "[B]ChannelEdit | [/B] The Support Channel are now closed!";
    message_channeledit_open = "[B]ChannelEdit | [/B] The Support Channel are now open!";
    message_antiflood_blocked = "[color=#aa0000][b][Support++] This action is currently not possible because of spam protection. Try again in a few seconds.[/b][/color]";
    message_channeledit_no_permission_all = "[color=#aa0000][b][Support++] You dont have permission to change all support channel! Put your server group id into the field: 'Default Supporter Id. Can change all Channel' [/b][/color]";
    message_channeledit_no_permission = "[color=#aa0000][b][Support++] You dont have permission to change the support channel '&channel' ! Put your server group id into the field: 'Supporter Id's for selected Channel.' [/b][/color]";
} 

 //||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||




    //Require module variables
    var event = require('event');
    var engine = require('engine');
    var backend = require('backend');
    var media = require('media');
    var audio = require('audio');
    var store = require('store');
    var db = require('db');
    var helpers = require('helpers');



//||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

//Set default undefined! Defaults vars...


if (!config) config = {}

    if (typeof config.spSupportUserNoMessage == 'undefined') {
        config.poke = "Sorry &u but no supporter are online!";
        engine.saveConfig(config);
    }
     if (typeof config.spSupportUserIgnoreMessage == 'undefined') {
        config.poke = "Sorry &u but you on the ignore list!";
        engine.saveConfig(config);
    }



//||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||




var useReplayToken = true;
    //function
    var startOk = true;
    if (typeof config.spSupportChannels == 'undefined') {
        startOk = false;
    }
    if (typeof config.spMsgMode_sp == 'undefined') {
        startOk = false;
    }
    if (typeof config.spTicketResponseToken == 'undefined') {
        useReplayToken = false;
    }

    var ChannelOpenCommand = "!online"
    if (config.spSupportChannelCommandOpen != ""){
        ChannelOpenCommand = config.spSupportChannelCommandOpen;
    }
    var ChannelCloseCommand = "!offline"
    if (config.spSupportChannelCommandClose != ""){
        ChannelCloseCommand = config.spSupportChannelCommandClose;
    }

    if (startOk) {
        engine.notify('Support++ is running!')
    } else {
        engine.notify('Support ++ | You must complete all required (*) fields ')
        engine.log("WARNING! You have to compleate all required (*) fields!")
    }
    var n_sp = 0;
    var n_user = 1;

    if (typeof config.spMsgMode_sp != "undefined" ){
        n_sp = config.spMsgMode_sp;
    }
    
    if (typeof config.spMsgMode_user != "undefined" ){
        n_user = config.spMsgMode_user;
    }

    //--------------------------------------------------- {ReplayTicket (PRO)} -----------------------------------------------------------

    if (useReplayToken && config.spDiscordActiv){
            setInterval(function() {
            replayTicketMessage();
    }, 20000);
    }

    function replayTicketMessage(){
         http({
             url: 'https://api.support-pp.de/discord?re=replay&token=' +  config.spDiscordToken + "&id=" + config.spDiscordID + "&replayToken=" + config.spTicketResponseToken 
        }, function(err, res) {
            if (err) {
                log('phpCode: ' + err);
                return
            }
            if (res.statusCode == 200) {
                var response = JSON.parse(res.data);

                response.forEach(function(r) {
                var uid = r.uid;
                var msg = r.msg;
                if (msg != ""){
                    //Check Online User.
                    var sendLive = false;
                    backend.getClients().forEach(function (client){
                        if (uid == client.uid()){
                            sendLive = true;
                        }
                });

                    if (sendLive){
                        //Send Replay live to online user
                        if (config.spMsgMode_user == 0) {
                            backend.getClientByUID(uid).poke( prefixTicketReplay +  msg);
                        } else {
                            backend.getClientByUID(uid).chat( prefixTicketReplay +  msg);
                        }
                    }else{
                        //Save the Replay into the sorage. 
                             store.set("replay_" + uid, msg)   
                             engine.log('Set replay to store.')                     

                    }
                    
                            
                }
                
                });

            }
        });
    }

    //--------------------------------------------------- {ReplayTicket (PRO)} -----------------------------------------------------------

                // Function startsWith
            if (!String.prototype.startsWith) {
            String.prototype.startsWith = function(searchString, position){
            return this.substr(position || 0, searchString.length) === searchString;
            };
            }
    function sendTelegram(text) {
        if (config.spTelegramActiv) {
            sinusbot.http({

                url: "https://api.telegram.org/bot" + encodeURIComponent(config.spTelegramToken) + "/sendMessage?chat_id=" + encodeURIComponent(config.spTelegramID) + "&text=" + encodeURIComponent(text),
                timeout: 60000,
            });
            engine.log('TelegramNotification send...')
        }

    }


    function sendDiscord(text, clientUid, mode) {
        if (config.spDiscordActiv) {
            if (mode == 0){
                   sinusbot.http({
                        //This is an extern API (from Support++ Team). You would use your self bot? Please contackt me... <support@allesverhext.de>
                        url: "https://api.support-pp.de/discord?&token=" + encodeURIComponent(config.spDiscordToken) + "&id=" + encodeURIComponent(config.spDiscordID) + "&msg=" + encodeURIComponent(text) + "&mode=0",
                        timeout: 60000,
                    });
                        engine.log('DiscordNotification send...')

            }else{
                 if (!useReplayToken && clientUid == 0) {
                    sinusbot.http({
                        //This is an extern API (from Support++ Team). You would use your self bot? Please contackt me... <support@allesverhext.de>
                        url: "https://api.support-pp.de/discord?&token=" + encodeURIComponent(config.spDiscordToken) + "&id=" + encodeURIComponent(config.spDiscordID) + "&msg=" + encodeURIComponent(text),
                        timeout: 60000,
                    });
                        engine.log('DiscordNotification send...')
                }else{
                    sinusbot.http({
                        //This is an extern API (from Support++ Team). You would use your self bot? Please contackt me... <support@allesverhext.de>
                        url: "https://api.support-pp.de/discord?&token=" + encodeURIComponent(config.spDiscordToken) + "&id=" + encodeURIComponent(config.spDiscordID) + "&msg=" + encodeURIComponent(text) + "&replayToken=" + encodeURIComponent(config.spTicketResponseToken) + "&replayUUID=" + encodeURIComponent(clientUid),
                        timeout: 60000,
                    });
                    engine.log('DiscordNotification send + replay info...')
                 }

            }
        

        }
    }


    //delDoubleGroups remove array -> objekt -> array
    function deleteDuplicates(arr) {
        var temp = {};
        for (var i = 1; i < arr.length; i++) temp[arr[i]] = true;
        var r = [];
        for (var k in temp) r.push(k);
        return r;
    }


    function getSupporter(groupArray) {
        var supporter = [];
        var i = 0;

        if (groupArray == "all") {
            config.spSupportChannels.forEach(function(spg) {
                backend.getClients().forEach(function(client) {
                    client.getServerGroups().forEach(function(group) {
                        spg.spSupporterId.forEach(function(group2) {
                            if (isAFK(client.getChannels()[0].id())) {
                                if (group.id() == group2) {
                                    i = i + 1;

                                    supporter[i] = client.id();
                                }
                            }
                        });
                    });

                });
            });
        } else {
            backend.getClients().forEach(function(client) {
                client.getServerGroups().forEach(function(group) {
                    groupArray.forEach(function(group2) {
                        if (isAFK(client.getChannels()[0].id())) {
                            if (group.id() == group2) {
                                i = i + 1;
                                supporter[i] = client.id();
                            }
                        }
                    });
                });

            });
        }

        return supporter;
    }

        function getSupporterInt() {
        var supporter = [];
        var i = 0;
            config.spSupportChannels.forEach(function(spg) {
                backend.getClients().forEach(function(client) {
                    client.getServerGroups().forEach(function(group) {
                        spg.spSupporterId.forEach(function(group2) {
                            if (isAFK(client.getChannels()[0].id())) {
                                if (group.id() == group2) {
                                    i = i + 1;

                                    supporter[i] = client.id();
                                }
                            }
                        });
                    });

                });
            });

            var re = deleteDuplicates(supporter);           
        return re.length -1;
    }

    //Check Ignore User
    function isIgnore(client) {

        var ignore = false;
        config.spSupportChannels.forEach(function(spg) {
            backend.getClientByID(client).getServerGroups().forEach(function(group) {
                config.spIgnoreId.forEach(function(group2) {
                    spg.spSupporterId.forEach(function(group3) {
                        if (group.id() == group2 || group.id() == group3) {
                            ignore = true;
                        }
                    });
                });
            });
        });
        return ignore;
    }

    // AFK Channel?

    function isAFK(id) {
        var afkChannels = config.spAfkChannels;
        if (afkChannels != undefined) {
            for (var i = 0; i < afkChannels.length; i++) {
                if (afkChannels[i].spAfkChannel == id) {
                    return false;
                }
                if (backend.getChannelByID(id).parent() != undefined)
                {
                    if (afkChannels[i].spAfkChannel == backend.getChannelByID(id).parent().id()) {
                        return false;
                    }
                }
     
            }
        }
        return true;
    }

    function IsUserSupporter(clientId){
        var is = false;
        config.spSupportChannels.forEach(function(spg) {
            backend.getClientByID(clientId).getServerGroups().forEach(function(group) {
                spg.spSupporterId.forEach(function(group3) {
                    if (group.id() == group3){
                        is = true;
                    }
                });
            });
        });
        return is;
    }

/**
 * Remove duplicates from array
 * 
 */

    function deleteDuplicates(arr) { var temp = {}; for (var i = 0; i < arr.length; i++) temp[arr[i]] = true; var r = []; for (var k in temp) r.push(k); return r; }


    //--------------------------------------------------- {Prefix} -----------------------------------------------------------

    var prefixTicket;
    var prefixSupport;
    var feedback_prefix;
    var prefixTicketReplay

    if (config.spPrefixActiv) {

        if (typeof config.spPrefixTicket == 'undefined') {
            prefixTicket = '[B]Ticket | [/B]';
        } else {
            prefixTicket = config.spPrefixTicket + ' ';
        }
        if (typeof config.spPrefixFeedback == 'undefined') {
            feedback_prefix = "[B][Feedback] [/B] ";
        } else {
            feedback_prefix = config.spPrefixFeedback + ' ';
        }
        if (typeof config.spPrefixSupport == 'undefined') {
            prefixSupport = '[B]Support | [/B]';
        } else {
            prefixSupport = config.spPrefixSupport + ' ';
        }
        if (typeof config.spPrefixTicketReplay == 'undefined') {
            prefixTicketReplay = '[B]Ticket replay | [/B]';
        } else {
            prefixSupport = config.spPrefixSupport + ' ';
        }
    } else {
        prefixSupport = '[B]Support | [/B]';
        prefixTicket = '[B]Ticket | [/B]';
        prefixTicketReplay = '[B]Ticket replay | [/B]';
        feedback_prefix = "[B][Feedback] [/B] ";

    }


    //--------------------------------------------------- {Support++ API} -----------------------------------------------------------

        function SendNotificationToAPI(token)
        {

        }

        function SendCreateTicketToAPI(title, content, userid, author )
        {
            if (config.spAPIActiv){
            sinusbot.http({
                'method': 'POST',
                'url': "http://api.support-pp.de:9696/api/ticket?title="+title+"&content="+content+"&tagid=2&userid="+userid+"&author="+author+"&platform=teamspeak",
                'timeout': 6000,
                'headers': {
                    "authorization": config.spAPIToken,
                    "cache-control": "no-cache"
                }
            }, function (error, response) {
                if (response.statusCode != 200) {
                    engine.log(error);
                    return;
                }

                var res;
                try {
                    res = JSON.parse(response.data);
                } catch (err) {
                    engine.log(err.message);
                }
                if (res === undefined) {
                    engine.log("Error in JSON!");
                    return;
                }
                if (res.Status == 201){
                    engine.log("[Support++ API] Ticket succesfull created!")
                    return;
                }
                engine.log(" ‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨ SUPPORT++ | ERROR ‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨")
                engine.log(res);
                engine.log(" ‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨ SUPPORT++ | ERROR ‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨")
            });
            //
            }
        }
    


    //--------------------------------------------------- {AntiFlood} -----------------------------------------------------------

    function AntiFlood(clientId, points) {
        if (config.spAntiFloodActiv) {

            var uid = backend.getClientByID(clientId).uid();
            var ds = store.get(uid);

            store.set(uid, ds + points)
        } else {
            return false;
        }
    }


    function isFlood(clientId, points) {

        var uid = backend.getClientByID(clientId).uid();
        var client = backend.getClientByID(clientId);
        var ds = store.get(uid);

        if (ds >= config.spAntiFloodPointsLimit) {
            client.chat(message_antiflood_blocked);
            AntiFlood(clientId, points)
            return true;
        } else {
            AntiFlood(clientId, points)
            return false;
        }
    }
    setInterval(function() {
        store.getKeys().forEach(function(key) {
            var ds = store.get(key);
            if (ds <= 0) {
                store.unset(key);
            } else {
                store.set(key, ds - config.spAntiFloodPointsReduce)
            }
        });

    }, 60000);



 
    //--------------------------------------------------- {function  event} -----------------------------------------------------------

    //MoveEvent -> User joint Support Channel
    event.on('clientMove', function(ev) {

        if (!backend.isConnected()) return;
        if (ev.client.isSelf()) return;
        if (typeof ev.toChannel == 'undefined') return;

        //Send Message (Supporter)
        function sendMessage(client, message, type) {
            if (type == "sp"){
                if (n_sp == 0) {
                    client.poke(prefixSupport + message.replace("&u", ev.client.name()));
                } else {
                    client.chat(prefixSupport + message.replace("&u", ev.client.name()));
                }
            }else{
                if (n_user == 0) {
                    client.poke(prefixSupport + message.replace("&u", ev.client.name()));
                } else {
                    client.chat(prefixSupport + message.replace("&u", ev.client.name()));
                }
            }
        }

        //--------------------------------------------------- {Replay Store Message (PRO)} -----------------------------------------------------------

        if (useReplayToken){
            store.getKeys().forEach(function (s){
                 if (s.startsWith("replay_")){
                    if (s == "replay_" + ev.client.uid()){
                        var msg = store.get("replay_" + ev.client.uid());
                         if (n_user == 0) {
                            ev.client.poke( prefixTicketReplay +  msg);
                        } else {
                            ev.client.chat( prefixTicketReplay +  msg);
                        }
                        store.unset("replay_" + ev.client.uid());
                    }
                    
                    
                }
            });

        }

        //--------------------------------------------------- {Join Support Channel} -----------------------------------------------------------

        var channel;

        //Check is join Support Channel
        config.spSupportChannels.forEach(function(sp) {
            channel = ev.client.getChannels();
            if (channel[0].id() == sp.spSupportChannel) {
                if (config.spThemenNotificationActiv){
                    ev.client.chat(config.spThemenMessage)
               }else {
                //Check is user ignore?
                if (isFlood(ev.client.id(), config.spAntiFloodPointsSupport)) {} else {
                    if (isIgnore(ev.client.id())) {
                        sendMessage(ev.client, config.spSupportUserIgnoreMessage, "user");
                    } else {
                        //Check Supporter Online?
                        if (!(getSupporter(sp.spSupporterId).length > 0)) {

                            if ((config.spDiscordModeSupport == 1 || config.spDiscordModeSupport == 0) && config.spDiscordActiv) {
                                sendDiscord(config.spDiscordTextSupport.replace("&u", ev.client.name()), 0, 0);
                            }
                            if ((config.spTelegramModeSupport == 1 || config.spTelegramModeSupport == 0) && config.spTelegramActiv) {
                                sendTelegram(config.spTelegrammTextSupport.replace("&u", ev.client.name()));
                            }
                                 playQueuTrackOffline(ev.client.getChannels()[0]);
                            sendMessage(ev.client, config.spSupportUserNoMessage, "user");
                        } else {
                            //Supporter is Online!

                            getSupporter(sp.spSupporterId).forEach(function(onlineSupporterID) {
                                //GetSupporter action
                                setTimeout(function() {
                                    sendMessage(backend.getClientByID(onlineSupporterID), sp.spSupportMessage.replace('&spI', getSupporterInt()), "sp");
                                }, 10);
                            });
                            //Send User Message
                            sendMessage(ev.client, sp.spSupportUserMessage.replace('&spI', getSupporterInt()), "user");
                            if (config.spTelegramModeSupport == 0) {
                                sendTelegram(config.spTelegrammTextSupport.replace("&u", ev.client.name()));
                            }
                            if (config.spDiscordModeSupport == 0) {
                                sendDiscord(config.spDiscordTextSupport.replace("&u", ev.client.name()), 0, 0);
                            }
                            //playTTS(sp.spSupportUserMessage.replace("&u", ev.client.name()))
                            playQueuTrack(ev.client.getChannels()[0]);
                        }
                    }
                }
            }
        }

        });
    });


    //--------------------------------------------------- {Feedback System} -----------------------------------------------------------
    // This is a new Module (like 2.0.5)
    //With this module you can get Feedback from your User after a Support talk!
    // The Feedback is save in the MySQL DB. 
    var session_prefix = "$session_feedback_new_"
    var msg_feedback_openFeedbakSession = "Welcome to the Feedback System! Please help use with your resion! Thanks!"
    var msg_feedback_errorFeedbakSession = "Sorry, please complete the feedback or exit with !exit"
    var msg_feedback_closeFeedbakSession = "Oh, ok we close your feedback session :/"
    var msg_feedback_closeFeedbakSessionOk = "Thank you for the Feedback!"
    var msg_feedback_to_invoker = "We ask the user &u for a feedback."
    var msg_feedbacl_list_failCommand = "You can get the feddback of a supporter with !feedbacks <uid>"
    var msg_feedback_unknow = "Oh, i have a problem with the mysql connection! Please check if uid exist and sinusbot can connect to MySQL."


    if (typeof config.msg_feedback_openFeedbakSession != "undefined" ){
        msg_feedback_openFeedbakSession = config.msg_feedback_openFeedbakSession;
    }
    if (typeof config.msg_feedback_errorFeedbakSession != "undefined" ){
        msg_feedback_errorFeedbakSession = config.msg_feedback_errorFeedbakSession
    }
    if (typeof config.msg_feedback_closeFeedbakSession != "undefined" ){
        msg_feedback_closeFeedbakSession = config.msg_feedback_closeFeedbakSession;
    }
    if (typeof config.msg_feedback_closeFeedbakSessionOk != "undefined" ){
        msg_feedback_closeFeedbakSessionOk = config.msg_feedback_closeFeedbakSessionOk;
    }
    if (typeof config.msg_feedback_openFeedbakSession != "undefined" ){
        msg_feedback_openFeedbakSession = config.msg_feedback_openFeedbakSession;
    }


   // config.spFeedbackActiv
    //spPrefixFeedback

    //Create DB if activated
    if (config.spFeedbackActiv){
       
    //ALTER TABLE `sp_feedback` ADD UNIQUE `unique_index`(`sp_uid`)
    }

    event.on("clientMove", function(ev) {
        if (!config.spFeedbackActiv) return;
        if (!backend.isConnected()) return;
        if (ev.client.isSelf()) return;
        if (typeof ev.toChannel == 'undefined'){
            if (feedback_has_activ_session(ev.client.id())){
                feedback_close_session(ev.client.id())
            }
        }

        var formChannelId = 0;
        if (ev.fromChannel != null){
            formChannelId = ev.fromChannel.id()
        }

        if (feedback_has_activ_session(ev.client.id())) return;
        //Check is user move out from Support channel

        config.spSupportChannels.forEach(function(channels){
                if (formChannelId == channels.spSupportChannel ){
                    feedback_start_session(ev.client.id(), ev.invoker.uid())
                }
        });


        
        function feedback_start_session(clientId, supporterUid){
            store.set(session_prefix + clientId, supporterUid);
            store.set(session_prefix + clientId + "_id", 0);
            ev.client.chat(feedback_prefix +  msg_feedback_openFeedbakSession);
            ev.invoker.chat(feedback_prefix + msg_feedback_to_invoker.replace("&u", ev.client.name()))
            feedback_ask_question(ev.client.id())

        }

    });

    function feedback_register_answear(clientId, answearId){
        var id = store.get(session_prefix + clientId + "_id");
        var supporterUUID = store.get(session_prefix + clientId);
        //store.unset(session_prefix + clientId + "_id");
        //store.set(session_prefix + clientId + "_id", id = id+1);
        var questionCount = 0;
        var question;
        //Save to DB
        config.spFeedbackQuestions.forEach(function(s, i, o){
            engine.log(id +"=" + i)
            questionCount = questionCount +1;
            if (id == i ){
        if (!feedback_has_activ_session(clientId)) return;
        var isExist = false;
        question = s.spFeedbackQuestion;
        if (dbc) dbc.query("SELECT id FROM sp_feedback WHERE fb_question = '" +s.spFeedbackQuestion+ "' AND sp_uid = '"+supporterUUID+"'", function(err, res) {
            if (!err) { 
                res.forEach(function(row) {
                    if (helpers.toString(row.id) != ""){
                        isExist = true;
                    } 
                    engine.log("DB " +typeof (helpers.toString(row.id))); 
                }); 
            }
            if (isExist == false){
                engine.log("[MySQL] Insert new Question to DB.");
                if (dbc) dbc.exec("INSERT INTO sp_feedback (sp_uid, fb_question, fb_answear, fb_count) VALUE ('" + supporterUUID +"', '" +   s.spFeedbackQuestion +"', '0', '0')");
            }
           });
            }
        })
        var fb_answear ;
        var fb_count ;

        if (dbc) dbc.query("SELECT * FROM sp_feedback WHERE fb_question = '" +question+ "' AND sp_uid = '" +supporterUUID+"'", function(err, res) {
            if (!err) { 
                res.forEach(function(row) {
                    var r1 = +helpers.toString(row.fb_answear) + +answearId
                    var r2 = parseInt(helpers.toString(row.fb_count)) + parseInt("1")
  
                    if (dbc) dbc.exec("UPDATE sp_feedback SET fb_answear = '"+r1+"', fb_count = '" +r2+"' WHERE fb_question = '" +question+ "' AND sp_uid = '" +supporterUUID+"'");
                }); 
            }
        });
        
        if (dbc) dbc.exec("UPDATE sp_feedback SET fb_answear = '"+fb_answear + answearId+"', fb_count = '" +  fb_count + 1 +"' WHERE fb_question = '" +question+ "' AND sp_uid = '" +supporterUUID+"'");

        
        store.set(session_prefix + clientId + "_id", id = id+1);
        var nid = store.get(session_prefix + clientId + "_id");
        if (nid == questionCount){
            feedback_close_session(clientId);
        }else{
            feedback_ask_question(clientId);
        }
    }

    event.on('chat', function(ev) {
        if (!backend.isConnected()) return;
        if (ev.client.isSelf()) return;

        if (ev.text == "!feedbacks"){
            ev.client.chat(feedback_prefix + msg_feedbacl_list_failCommand)
            return;
        }

        if (ev.text.startsWith("!feedbacks ")){
            var error = true;
            ev.client.chat("‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨ Feddbacks | " + ev.text.replace("!feedbacks ", "") +" ‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨")
            if (dbc) dbc.query("SELECT * FROM sp_feedback WHERE sp_uid = '" +ev.text.replace("!feedbacks ", "")+"'", function(err, res) {
                if (!err) { 
                    res.forEach(function(row) {
                            error = false;
                            engine.log(+helpers.toString(row.fb_answear) / +helpers.toString(row.fb_count));
                        ev.client.chat("‚ùØ " +helpers.toString(row.fb_question) + " | " + IntToStarString( +helpers.toString(row.fb_answear) / +helpers.toString(row.fb_count)) + " | √ò" + extround(+helpers.toString(row.fb_answear) / +helpers.toString(row.fb_count), 2) )
                    }); 
                }
                ev.client.chat("‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨ Feddbacks | " + ev.text.replace("!feedbacks ", "") +" ‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨")
            });
            setTimeout(function() {
                if (error){
                    ev.client.chat(msg_feedback_unknow)
                }
            }, 10);
 
           
            return;
        }
        function extround(zahl,n_stelle) {
            zahl = (Math.round(zahl * n_stelle) / n_stelle);
            return zahl;
        }

        if (!feedback_has_activ_session(ev.client.id())) return;
        if (ev.text == "!info") return;
        if (ev.text == "!help") return;
        if (ev.text == "!time") return;
        if (ev.text == "!version") return;


        if (ev.text == "!exit"){
            feedback_close_session(ev.client.id());
            ev.client.chat(msg_feedback_closeFeedbakSession)
            return;
        }

        if (ev.text  <= 5 ){
            feedback_register_answear(ev.client.id(), ev.text)
        }else{
            ev.client.chat(msg_feedback_errorFeedbakSession);
            return;
        }
        

    });

    function feedback_ask_question(clientId){
        var id = store.get(session_prefix + clientId + "_id");
        var tmpID = 0;
        config.spFeedbackQuestions.forEach(function(s, i, o){
            if (id == i++){
            backend.getClientByID(clientId).chat(s.spFeedbackQuestion);
            return;
            }else{
                tmpID = tmpID + 1;
            }
        })
       
    }

    function feedback_has_activ_session(clientId){
        if (store.get(session_prefix + clientId) != null) {
            return true;
        }else{
            return false;
        }
    }

    function feedback_close_session(clientId){
       store.unset(session_prefix + clientId)
       backend.getClientByID(clientId).chat(feedback_prefix + msg_feedback_closeFeedbakSessionOk)

    }

    function IntToStarString(aNumber){
        var starString = "‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ";
        if (aNumber > 0){
            starString = "‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ";
        }
        if (aNumber > 1){
            starString = "‚òÖ‚òÜ‚òÜ‚òÜ‚òÜ";
        }
        if (aNumber > 2){
            starString = "‚òÖ‚òÖ‚òÜ‚òÜ‚òÜ";
        }
        if (aNumber > 3){
            starString = "‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ";
        }
        if (aNumber > 4){
            starString = "‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ";
        }
        if (aNumber > 5){
            starString = "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ";
        }

        switch(aNumber){
            case 1: starString = "‚òÖ‚òÜ‚òÜ‚òÜ‚òÜ"; break;
            case 2: starString = "‚òÖ‚òÖ‚òÜ‚òÜ‚òÜ"; break;
            case 3: starString = "‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ"; break;
            case 4: starString = "‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ"; break;
            case 5: starString = "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ"; break;
            case 0: starString = "‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ"; break;
        }
        return starString;
    }
/*/
    function SentFeedbackQuestion(clientId, answearId){
        answearId_tmp = answearId
        if (answearId_tmp == 0){ answearId_tmp = 1};
        if (items_question.length > answearId){
            backend.getClientByID(clientId).chat(feedback_prefix + items_question[answearId]);
        }else{
            backend.getClientByID(clientId).chat(feedback_prefix + msg_feedback_closeFeedbakSessionOk);
            closeSession(clientId);
        }

    }

    function openNewSession(clientId){
        store.set(session_prefix + clientId, 0);
        engine.log("DEBUG: id- " + store.get(session_prefix + clientId))

        //Check and Add Supporter

        for (var i = 0; i < items_question.length; i++){
            engine.log('ISERT_________')
        if (dbc) dbc.exec("INSERT INTO sp_feedback (sp_uid, fb_question, fb_answear, fb_count) VALUES ('"+feedback_supporter_uid +"', '" + items_question[i] +"', '0', '0') ON DUPLICATE KEY UPDATE sp_uid = '" + feedback_supporter_uid +"'");
        }
        backend.getClientByID(clientId).chat(feedback_prefix + msg_feedback_openFeedbakSession);
            backend.getClientByID(clientId).chat(feedback_prefix + items_question[0]);

    }

    function hasActivSession(clientId){
        if (store.get(session_prefix + clientId) >= 0) {
            return true;
        }else{
            return false;
        }
    }

    function closeSession(clientId){
        if (store.get(session_prefix + clientId) >= 0) {
            store.unset(session_prefix + clientId);
//tmp -1
            backend.getClientByID(clientId).chat(msg_feedback_list_feedback_user);
            for (i = 0; i < items_ansewar.length; i++) { 
                if (items_ansewar[i][0] == clientId){
                    backend.getClientByID(clientId).chat("‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà");
                    for (i = 0; i < items_question.length; i++) { 
                    backend.getClientByID(clientId).chat(feedback_prefix + items_question[i] + " -> " + IntToStartString(items_ansewar[0][i+1]) );  
                    }
                    backend.getClientByID(clientId).chat("‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà");
                }
            }
        }else{
            return;
        }
    }

    function registerNewAnswaer(clientId, answearId){
        var answearCount = store.get(session_prefix + clientId);
        engine.log(answearCount + "<---------------")
        
        //SET TO DB
        store.set(session_prefix + clientId, answearCount + 1);
        engine.log("registerNewMessage_count: " + store.get(session_prefix + clientId));
                
            
        
            SentFeedbackQuestion(clientId, answearCount)
    }
        //‚òÜ ‚òÖ
    function IntToStartString(aNumber){
        var starString = "‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ";
        switch(aNumber){
            case "1": starString = "‚òÖ‚òÜ‚òÜ‚òÜ‚òÜ"; break;
            case "2": starString = "‚òÖ‚òÖ‚òÜ‚òÜ‚òÜ"; break;
            case "3": starString = "‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ"; break;
            case "4": starString = "‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ"; break;
            case "5": starString = "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ"; break;
            case "0": starString = "‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ"; break;
        }
        return starString;
    }
    
    event.on('chat', function(ev) {
        if (!backend.isConnected()) return;
        if (ev.client.isSelf()) return;


            if (ev.text =="startFeedback"){
                engine.log("ID: " + ev.client.id())
                openNewSession(ev.client.id());
            }
            if (ev.text =="clear"){
                closeSession(ev.client.id());
                
            }

        if (hasActivSession(ev.client.id())){            
            if (ev.text  <= 5 ){
                registerNewAnswaer(ev.client.id(), ev.text);
            }else if (ev.text== "!exit"){
                closeSession(ev.client.id());
            }else{
                ev.client.chat(msg_feedback_errorFeedbakSession);
            }
        }

    });

//FEHLER!
*/


    //--------------------------------------------------- {/Feedback System} -----------------------------------------------------------

    //--------------------------------------------------- {MySQL Connection} -----------------------------------------------------------

    //INFO reset: ALTER TABLE sp_supporter AUTO_INCREMENT = 1
    //Create Table `sp_supporter`

if(config.spMySQLActiv){
    var mysql_host = config.spHost;
    var mysql_username = config.spUsername;//config.spUsername;
    var mysql_db = config.spDB;
    var mysql_password = config.spPassword;//config.spPassword;

    var dbc = db.connect({ driver: 'mysql', host: mysql_host, username: mysql_username, password: mysql_password, database: mysql_db }, function(err) {
        if (err) { engine.log(err); }else{ engine.log("[Support++] DB connection OK!")}
    });
    if (dbc) dbc.exec("CREATE TABLE IF NOT EXISTS `sp_supporter` ( `id` int(11) NOT NULL AUTO_INCREMENT, `sp_uid` varchar(100) NOT NULL, `sp_name` varchar(100) DEFAULT NULL, `sp_hierarchy_id` int(20) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `unique_index` (`sp_name`,`sp_uid`) ) ENGINE=InnoDB AUTO_INCREMENT=142 DEFAULT CHARSET=utf8");
    if (dbc) dbc.exec("CREATE TABLE IF NOT EXISTS `sp_feedback` ( `id` int(11) NOT NULL AUTO_INCREMENT, `sp_uid` varchar(900) NOT NULL, `fb_question` varchar(900) NOT NULL, `fb_answear` int(100) NOT NULL, `fb_count` int(255) NOT NULL, PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8");
    if (dbc) dbc.exec("CREATE TABLE IF NOT EXISTS `sp_tickets` (`id` int(11) NOT NULL AUTO_INCREMENT,`text` text NOT NULL,`uuid` varchar(30) NOT NULL,`name` text NOT NULL,`version` varchar(60) NOT NULL,`status` tinyint(4) NOT NULL,`data_close` timestamp NULL DEFAULT NULL,`date_open` timestamp NULL DEFAULT CURRENT_TIMESTAMP,PRIMARY KEY (`id`)) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8");
    engine.log("[Support++] Create new DB if not exist...")
    

    //if (dbc) dbc.exec("INSERT INTO sp_supporter (sp_uid, sp_name) VALUES ('fdff', 'dddd')");
    if (dbc) dbc.query("SELECT * FROM sp_supporter", function(err, res) {
     if (!err) { res.forEach(function(row) { engine.log("FROM DB: " +helpers.toString(row.sp_uid)); }); }
    });
}
    //--------------------------------------------------- {/MySQL Connecion} -----------------------------------------------------------


    //--------------------------------------------------- {functionen Chat} -----------------------------------------------------------

    event.on('chat', function(ev) {

        if (!backend.isConnected()) return;
        if (ev.client.isSelf()) return;

        if (ev.client.isSelf()) {
            return;
        }


        // Send Message (Supporter)
        function sendMessage(client, message, tr, type) {
            if (tr) {
                if (type == "sp"){
                    if (n_sp == 0) {
                        client.poke(prefixTicket + message.replace("&u", ev.client.name()));
                    } else {
                        client.chat(prefixTicket + message.replace("&u", ev.client.name()));
                    }
                }else{
                    if (n_user == 0) {
                        client.poke(prefixTicket + message.replace("&u", ev.client.name()));
                    } else {
                        client.chat(prefixTicket + message.replace("&u", ev.client.name()));
                    }
                }
            } else {
                if (type == "sp"){
                    if (n_sp == 0) {
                        client.poke(prefixTicket + message);
                    } else {
                        client.chat(prefixTicket + message);
                    }
                }else{
                    if (n_user == 0) {
                        client.poke(prefixTicket + message);
                    } else {
                        client.chat(prefixTicket + message);
                    }
                }
            }
        }
        //--------------------------------------------------- {Ticket System } -----------------------------------------------------------

//

/*
var tr_ticket_id_count;
if (store.get("spp_ticket_nr") == "NaN" || store.get("spp_ticket_nr")  == "undefined" || store.get("spp_ticket_nr") == "null" || typeof (store.get("spp_ticket_nr")) == "undefined"){
engine.log("grtrigger---")
 store.set("spp_ticket_nr", 1);
 tr_ticket_id_count = 1;
}else{
tr_ticket_id_count = store.get("spp_ticket_nr");
}
engine.log("[Support++] : Ticket ID:  " + store.get("spp_ticket_nr") )

        // [id] [author] [date_short] [date_long] [ticket] [status]
        ticket_system_prefix_header = "‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨  Ticket-List  ‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨"
        ticket_system_prefix_table = "[id] | [author] [date] [ticket] [status]"
        ticket_system_permission_deny_list = "[color=#aa0000][b]" + prefixTicket +" Sorry, but you dont have any permission to show the Ticket -List. Please add your ServerGroup id to the Supporter list. [/b][/color]";


        //A list with all avaibel ticket information...
        var tr_id = "[id]";
        var tr_author = "[author]"
        var tr_data = "[data]";
        var tr_ticket = "[ticket]";
        var tr_status = "[status]"


        //ticket_array = [id, author, data, ticket, status]
        function SaveToDB(){
            engine.log("TEST " + tr_ticket_id_count + 1);
                tr_ticket_id_count = tr_ticket_id_count +1;
            var id = tr_ticket_id_count;
            var author = "[URL=client://0/" + ev.client.uid() +"]" + ev.client.name() + "[/URL]"
            var data = getDateTime();
            var ticket = ev.text.replace(config.spTicketCommand, '');
            var status = "open";

            var tmp_array = [id, author, data, ticket, status];
            store.unset("spp_ticket_nr");
            store.set("spp_ticket_nr", tr_ticket_id_count);

            store.set("ticket_nr_" + tr_ticket_id_count, ev.text)
            engine.log("Ticket saved to DB!")

        }

        function ShowticketList(){
            getSupporter("all").forEach(function(supporter){
            var tr_ticket_id_count_tmp = store.get("spp_ticket_nr");
                if (supporter == ev.client.id() ){
                    ev.client.chat(ticket_system_prefix_header);
                    engine.log("ID-FORTicket: " + tr_ticket_id_count)

                    for (var i = 1; i >= tr_ticket_id_count; i++ )
                    {
                        engine.log("Load: " + i)
                        var ticket_object = store.get("ticket_nr_" + i);
                       ev.client.chat(ticket_object); 
                    }

                }else{
                    engine.log(ticket_system_permission_deny_list);
                    ev.client.chat(ticket_system_permission_deny_list);
                    return;
                }
            });



        }

*/

        var discord = false;
        var discordTicket = config.spDiscordTextTicket;
        var telegram = false;
        var telegramTicket = config.spTelegrammTextTicket;

        function sendToNotificationModule() {
            if (telegram && config.spTelegramModeTicket == 0 || config.spTelegramModeTicket == 1) {
                sendTelegram(telegramTicket)
            }
            if (discord && config.spDiscordModeTicket == 0 || config.spDiscordModeTicket == 1) {
                sendDiscord(discordTicket, ev.client.uid(), 1)
            }
        }
        var ticket = "no Text!";

        //Ticket replace
        ticket = ev.text.replace(config.spTicketCommand, '');

        if (config.spDiscordActiv) {
            discordTicket = discordTicket.replace('&u', ev.client.name())
            discordTicket = discordTicket.replace('&msg', ticket)
            discordTicket = discordTicket.replace('&u_id', ev.client.uid())
            discordTicket = discordTicket.replace('&u_ip', ev.client.getIPAddress())
            discord = true;
        }
        if (config.spTelegramActiv) {
            telegram = true;
            telegramTicket = telegramTicket.replace('&u', ev.client.name())
            telegramTicket = telegramTicket.replace('&msg', ticket)
            telegramTicket = telegramTicket.replace('&u_id', ev.client.uid())
            telegramTicket = telegramTicket.replace('&u_ip', ev.client.getIPAddress())
            
        }



        if (ev.text.indexOf(config.spTicketCommand) != -1) {
            if (!(isFlood(ev.client.id(), config.spAntiFloodPointsSupport))) {
                if (!(isIgnore(ev.client.id()))) {
                    //send best√§tigung Ticket
                    engine.log('Create Ticket');
                    if (config.spThemenNotificationActiv){
                       config.spThemen.forEach(function(themen)  {
                           var startsWithCommand = ticket.startsWith(" " + themen.spThemaId);
                           engine.log("Ticket " + ticket + " ID " + themen.spThemaId)
                           engine.log(startsWithCommand);
                           if (startsWithCommand){

                               ticket.replace(themen.spThemaId)
                         sendMessage(ev.client, config.spTicketSendMsg, true, "user" );
                              backend.getClients().forEach(function(client) {
                            client.getServerGroups().forEach(function(group) {
                                themen.spThemaSupporterGroups.forEach(function(group2) {
                                    if (isAFK(client.getChannels()[0].id())) {
                                        if (group.id() == group2) {
                                            var client_object = "[URL=client://0/" + ev.client.uid() +"]" + ev.client.name() +"[/URL]"
                                            var msg = config.spNewTicketMsg.replace('&u', ev.client.name());
                                            if (n_sp == 0) {
                                                client.poke(prefixTicket + msg.replace('&client', client_object));
                                            } else {
                                                client.chat(prefixTicket + msg.replace('&client', client_object));
                                            }
                                            client.chat(prefixTicket + ticket)
                                            if (config.spTicketLargeActiv == 1)
                                            {
                                                engine.log("Create ticket (DB)");
                                                CreateTicketDb(ev.client, ticket);
                                            }
                                            SendCreateTicketToAPI("Tichet from " + ev.client.name(), ticket, ev.client.uid(), ev.client.name() )
                                        }
                                         
                                    }
                                    
                                });
                            });
                        
                        });
                        
                   
                           }
                    });
                    setTimeout(function() {
                        sendToNotificationModule();
                        
                    }, 10);


                    }else if (!config.spThemenNotificationActiv){

                    engine.log('Themen Module -> Ticket recived')
                    sendMessage(ev.client, config.spTicketSendMsg,true, "user");
                    config.spSupportChannels.forEach(function(spg) {
                        backend.getClients().forEach(function(client) {
                            client.getServerGroups().forEach(function(group) {
                                spg.spSupporterId.forEach(function(group2) {
                                    if (isAFK(client.getChannels()[0].id())) {
                                        if (group.id() == group2) {
                                            var client_object = "[URL=client://0/" + ev.client.uid() +"]" + ev.client.name() +"[/URL]"
                                            var msg = config.spNewTicketMsg.replace('&u', ev.client.name());
                                            if (n_sp == 0) {
                                                client.poke(prefixTicket + msg.replace('&client', client_object));
                                            } else {
                                                client.chat(prefixTicket + msg.replace('&client', client_object));
                                            }
                                            client.chat(prefixTicket + ticket)
                                            SendCreateTicketToAPI("Tichet from " + ev.client.name(), ticket, ev.client.uid(), ev.client.name() )
                                            if (config.spTicketLargeActiv == 1)
                                            {
                                                engine.log("Create ticket (DB)");
                                                CreateTicketDb(ev.client, ticket);
                                            }
                                        }
                                    }
                                });
                            });
                        });
                    });
                    setTimeout(function() {
                        sendToNotificationModule();
                    }, 10);
                         
                }
                } else {
                    if (n_user == 0) {
                        ev.client.poke(config.spSupportUserIgnoreMessage.replace('&u', ev.client.name()));
                    } else {
                        ev.client.chat(config.spSupportUserIgnoreMessage.replace('&u', ev.client.name()));
                    }
                }
            }
        }

        function getDateTime() {
            var now     = new Date(); 
            var year    = now.getFullYear();
            var month   = now.getMonth()+1; 
            var day     = now.getDate();
            var hour    = now.getHours();
            var minute  = now.getMinutes();
            var second  = now.getSeconds(); 
            if(month.toString().length == 1) {
                var month = '0'+month;
            }
            if(day.toString().length == 1) {
                var day = '0'+day;
            }   
            if(hour.toString().length == 1) {
                var hour = '0'+hour;
            }
            if(minute.toString().length == 1) {
                var minute = '0'+minute;
            }
            if(second.toString().length == 1) {
                var second = '0'+second;
            }   
            var dateTime = year+'/'+month+'/'+day+' '+hour+':'+minute+':'+second;   
             return dateTime;
        }

//--------------------------------------------------- { LICENSE } -----------------------------------------------------------
        if (ev.text == '!info' || ev.text == '!help') {
            // The license dont allow you to remove this watermarket! Please dont remove this? The script was lots of work... Thanks for your undestand! :)
            ev.client.chat("This server uses VerHext's [url=https://forum.sinusbot.com/resources/support.229/]Support++[/url] script. Developed by the Support++ Team. Thanks for use!")
        }
        if (ev.text == '!version') {
            ev.client.chat("[Support++] [url=https://forum.sinusbot.com/resources/support.229/] 2.0.4.9-2 BETA[/url]")
        }
        if (ev.text == '!time')
        {
            ev.client.chat("[Support++] Your Time: " + time())
        }


//--------------------------------------------------- { Themen Module } -----------------------------------------------------------

        function sendMessage(client, message, type) {
            if (type == "sp"){
                if (n_sp == 0) {
                    client.poke(prefixSupport + message.replace("&u", ev.client.name()));
                } else {
                    client.chat(prefixSupport + message.replace("&u", ev.client.name()));
                }
            }else{
                if (n_user == 0) {
                    client.poke(prefixSupport + message.replace("&u", ev.client.name()));
                } else {
                    client.chat(prefixSupport + message.replace("&u", ev.client.name()));
                }
            }
        }

        //Themen Module
       
        if (config.spThemenNotificationActiv){
             var inSupportChannelThema = false;
               config.spSupportChannels.forEach(function(sp) {
                    channel = ev.client.getChannels();
                        if (channel[0].id() == sp.spSupportChannel) {
                            //User is in Support Channel
                            inSupportChannelThema = true;
                            
                            }
                        });
                if (inSupportChannelThema){
                    config.spThemen.forEach(function(thema) {
                            if (ev.text == thema.spThemaId){
                                
                            
       //
                if (isFlood(ev.client.id(), config.spAntiFloodPointsSupport)) {} else {
                    if (isIgnore(ev.client.id())) {
                        sendMessage(ev.client, config.spSupportUserIgnoreMessage, "user");
                    } else {

                        //Check Supporter Online?
                        if (!(getSupporter(thema.spThemaSupporterGroups).length > 0)) {
                            //Supporter is Offline
                           

                            if (config.spDiscordModeSupport == 1 || config.spDiscordModeSupport == 0) {
                                sendDiscord(config.spDiscordTextSupport.replace("&u", ev.client.name()), 0, 0);
                            }
                            if (config.spTelegramModeSupport == 1 || config.spTelegramModeSupport == 0) {
                                sendTelegram(config.spTelegrammTextSupport.replace("&u", ev.client.name()));
                            }

                            sendMessage(ev.client, config.spSupportUserNoMessage , "user");
                             playQueuTrackOffline(ev.client.getChannels()[0]);
                           

                        } else {
                            //Supporter is Online!

                            getSupporter(thema.spThemaSupporterGroups).forEach(function(onlineSupporterID) {
                                //GetSupporter action
                                setTimeout(function() {
                                    sendMessage(backend.getClientByID(onlineSupporterID), config.spThemenMessageSupporter.replace("&thema", thema.spThemaName), "sp");
                                }, 10);
                            });
                            //Send User Message getSupporter(sp.spSupporterId).length
                          
                            sendMessage(ev.client, config.spThemenMessageUser.replace("&thema", thema.spThemaName), "user")
                            if (config.spTelegramModeSupport == 0) {
                                sendTelegram(config.spTelegrammTextSupport.replace("&u", ev.client.name()).replace("&thema", thema.spThemaName));
                            }
                            if (config.spDiscordModeSupport == 0) {
                                sendDiscord(config.spDiscordTextSupport.replace("&u", ev.client.name()).replace("&thema", thema.spThemaName), 0, 0);
                            }
                            //playTTS(sp.spSupportUserMessage.replace("&u", ev.client.name()))
                            playQueuTrack(ev.client.getChannels()[0]);
                        }
                    }
                }
                                //

        
                            }
                        });
                     
               
                }

        }


        //--------------------------------------------------- {ChannelEdit} -----------------------------------------------------------



     //Channel Edit for Channel with prefix   

        if (ev.text.startsWith(ChannelOpenCommand + " ") == 1 && config.spChannelEditActiv) {
            var parameter = ev.text.replace( ChannelOpenCommand + ' ', "");

            if (issupporter(ev.client.id(), parameter)) {
                    ev.client.chat(message_channeledit_open);
                openSupportChannel(parameter);
            }else{
                ev.client.chat(message_channeledit_no_permission.replace("&channel", parameter))
                engine.log(message_channeledit_no_permission.replace("&channel", parameter))
            }
        }



        if (ev.text.startsWith(ChannelCloseCommand + " ") == 1 && config.spChannelEditActiv) {
             var parameter = ev.text.replace(ChannelCloseCommand +' ', "");
            if (issupporter(ev.client.id(), parameter)) {
                    ev.client.chat(message_channeledit_closed);
                    closeSupportChannel(parameter);
            }else{
                ev.client.chat(message_channeledit_no_permission.replace("&channel", parameter))
                engine.log(message_channeledit_no_permission.replace("&channel", parameter))
            }
        }

        if (ev.text == ChannelOpenCommand && typeof config.spSupportChannelSupporterId != 'undefined'){
            var allowChangeAllChannel = false

            ev.client.getServerGroups().forEach(function(gr1){
                config.spSupportChannelSupporterId.forEach(function(gr2){

                    if (gr1.id() == gr2){
                        allowChangeAllChannel = true;
                    }
                });
              });

              if (allowChangeAllChannel){
            config.spChannelEdit.forEach(function(channelEdit){
                    openSupportChannel(channelEdit.spSupportChannelPrefix);
                     });
                      ev.client.chat(message_channeledit_all_open);
                 }else{
                    ev.client.chat(message_channeledit_no_permission_all)
                    engine.log(message_channeledit_no_permission_all)
                 }
        }

                if (ev.text == ChannelCloseCommand && typeof config.spSupportChannelSupporterId != 'undefined'){
            var allowChangeAllChannel = false

            ev.client.getServerGroups().forEach(function(gr1){
                config.spSupportChannelSupporterId.forEach(function(gr2){

                    if (gr1.id() == gr2){
                        allowChangeAllChannel = true;
                    }
                });
              });

              if (allowChangeAllChannel){
            config.spChannelEdit.forEach(function(channelEdit){
                    closeSupportChannel(channelEdit.spSupportChannelPrefix);
                     });
                    ev.client.chat(message_channeledit_all_closed);
              }else{
                ev.client.chat(message_channeledit_no_permission_all)
                engine.log(message_channeledit_no_permission_all)
              }
        }
     });


            function issupporter(clientId, prefix) {
        var isSupporter = false;
            config.spChannelEdit.forEach(function(channelEdit){
                    backend.getClientByID(clientId).getServerGroups().forEach(function(group){
                        channelEdit.spSupportChannelSupporterId.forEach(function(group2){
                            if (channelEdit.spSupportChannelPrefix == prefix){
                                if (group2 == group.id()){
                                isSupporter = true;
                            }
                            }
                    });
                    });
                });
                        return isSupporter;
    }

    
            function issupporterOnline(prefix) {
          var issupporterOnline = false;
        
            config.spChannelEdit.forEach(function(channelEdit){
                if (prefix == channelEdit.spSupportChannelPrefix){
                    backend.getClients().forEach(function(clients){
                     if (isAFK(clients.getChannels()[0].id())) {
                        clients.getServerGroups().forEach(function(groups){
                            
                        channelEdit.spSupportChannelSupporterId.forEach(function(group2){
                                if (group2 == groups.id()){
                                issupporterOnline = true;
                            
                            }
                        
                    });
                    });
                     }
                });
                }
                });
                        return issupporterOnline;
    }

            function isDefaultsupporter(clientId) {
                var isSupporter = false;
                if (!config.spSupportChannelSupporterId){
                    return isSupporter; 
                }
        
            config.spSupportChannelSupporterId.forEach(function(group){
                    backend.getClientByID(clientId).getServerGroups().forEach(function(group){

                                if (group2 == group.id()){
                                isSupporter = true;
                            
                            }
                    });
                });
                        return isSupporter;
    }
    

    function generatePassword(length)
    {
        var result = "";
        var charset = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
        for( var i=0; i < length; i++ )
            result += charset.charAt(Math.floor(Math.random() * charset.length));
        return result;
    }

     function closeSupportChannel(parameter) {
         config.spChannelEdit.forEach(function(channelEdit){
            if (channelEdit.spSupportChannelNameOfflineMsg.split('').length > 40 )
            {
                engine.log(" ‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨ SUPPORT++ | ERROR ‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨")
                engine.log("[ChannelEdit] Your channel name is to long! Teamspeak has a max size from 40 chars!")
                engine.log("     => Please shortness your channel name. ")
                engine.log(" ‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨ SUPPORT++ | ERROR ‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨")
            }

            var channel = backend.getChannelByID(channelEdit.spSupportChannelNameChange);
        if (channelEdit.spSupportChannelPrefix == parameter){
            if (backend.getChannelByID(channelEdit.spSupportChannelNameChange).name() == channelEdit.spSupportChannelNameOfflineMsg )
            {
                return;
            }

         if (channelEdit.spSupportChannelPasswordActiv == 0){
         
                    backend.getChannelByID(channelEdit.spSupportChannelNameChange).update({
                    name: channelEdit.spSupportChannelNameOfflineMsg,
                    password: generatePassword(20),
                    description: channelEdit.spSupportChannelNameOfflineDescription,
                    maxClients: channelEdit.spSupportChannelMaxClientsOffline 
                });  
            }else{
                     backend.getChannelByID(channelEdit.spSupportChannelNameChange).update({
                    name: channelEdit.spSupportChannelNameOfflineMsg,
                    description: channelEdit.spSupportChannelNameOfflineDescription,
                    maxClients: channelEdit.spSupportChannelMaxClientsOffline 
                });  
            }
        

                //Update: maxClients: channelEdit.spSupportChannelMaxClientsOffline  
        }
   
        if (channelEdit.spSupportChannelKickActiv == 0){
                  
            var ch = channel.getClients();
                ch.forEach(function(client){
                    if (!client.isSelf()){
                       client.kickFromChannel(message_channeledit_kickreason);
                    } 
                 });
            
        }
   
            });
            pw = "";
    }

     function openSupportChannel(parameter) {
    config.spChannelEdit.forEach(function(channelEdit){
        if (channelEdit.spSupportChannelNameOnlineMsg.split('').length > 40 )
        {
            engine.log(" ‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨ SUPPORT++ | ERROR ‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨")
            engine.log("[ChannelEdit] Your channel name is to long! Teamspeak has a max size from 40 chars!")
            engine.log("     => Please shortness your channel name. ")
            engine.log(" ‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨ SUPPORT++ | ERROR ‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨")
        }
        var bool = true;
        if (channelEdit.spSupportChannelPrefix == parameter){
            if (backend.getChannelByID(channelEdit.spSupportChannelNameChange).name() == channelEdit.spSupportChannelNameOnlineMsg )
            {
                return;
            }

        backend.getChannelByID(channelEdit.spSupportChannelNameChange).update({
        name: channelEdit.spSupportChannelNameOnlineMsg,
        password: "",
        description: channelEdit.spSupportChannelNameOnlinDescription,
        maxClients: channelEdit.spSupportChannelMaxClientsOnline
    });

    //Update: maxClients: channelEdit.spSupportChannelMaxClientsOnline,
        }
    });
    }

    

 //--------------------------------------------------- { Automatic SupportChannel Manager} -----------------------------------------------------------
          event.on('clientMove', function(ev) {


        if (!backend.isConnected()) return;
        if (ev.client.isSelf()) return;
        if (typeof ev.toChannel == 'undefined') return;

        var formChannelId = 0;
        if (ev.fromChannel != null){
            formChannelId = ev.fromChannel.id()
        }

        if (formChannelId == 0 ){
            //engine.log("TRIGGERD!!!")
            if ( IsUserSupporter(ev.client.id())){
                if (dbc) dbc.exec("INSERT INTO sp_supporter (sp_uid, sp_name) VALUES ('"+ev.client.uid() +"', '" + ev.client.name() +"') ON DUPLICATE KEY UPDATE sp_name = '" + ev.client.name() +"'");
            }
    }


if (config.spAutomaticChannelManager){



    var fromAfk = false;
    var toAFK = false;
    var subAFK = false;

    var afkChannels = config.spAfkChannels;
    for (var i = 0; i < afkChannels.length; i++) 
    {
       
        if (formChannelId == afkChannels[i].spAfkChannel)
        {
            fromAfk = true;

        }
        if (ev.toChannel.id() == afkChannels[i].spAfkChannel)
        {
            toAFK = true;
        }
    }

    if (fromAfk && toAFK )
    {
        return;
    }



                function isAFK(id) {
                    var afkChannels = config.spAfkChannels;
                    var bool = false;
                    if (afkChannels != undefined) {
                        for (var i = 0; i < afkChannels.length; i++) {
                           if (backend.getChannelByID(id).parent() != undefined)
                            {
                                if (afkChannels[i].spAfkChannel == backend.getChannelByID(id).parent().id()) {
                                  //  engine.log("IsSUB!")
                                    bool = true;
                                }
                            }
                 
                        }
                    }
                    if (bool){
                        return true;
                    }else{
                        return false;
                    }
                 }
    try {
                    
        config.spAfkChannels.forEach(function(afkCh){
          
            if ((ev.fromChannel == null && config.spSupportChannelOpenAutomatic && ev.toChannel.isDefault()) || (formChannelId == afkCh.spAfkChannel && config.spSupportChannelOpenAutomatic) || (isAFK(formChannelId) && config.spSupportChannelOpenAutomatic  )){
                engine.log("Open: " + afkCh.spAfkChannel + " | "  + ev.toChannel.id() );
                config.spChannelEdit.forEach(function(channelEdit){
                    ev.client.getServerGroups().forEach(function(group){
                        channelEdit.spSupportChannelSupporterId.forEach(function(group2){
                            if (group.id() == group2){
                                engine.log("Supporter " + ev.client.name() + " joint Server! Check Suppport Channel..")
                                    openSupportChannel(channelEdit.spSupportChannelPrefix)
                            }
                        });
                    });
                });
            }
        });
    }
        catch(err) {
           engine.log("Support++ | ChannelEdit " )
        }
        

         config.spAfkChannels.forEach(function(afkCh){
            if (ev.toChannel == null  && config.spSupportChannelCloseAutomatic) {
                config.spChannelEdit.forEach(function(channelEdit){
                    ev.client.getServerGroups().forEach(function(group){
                        channelEdit.spSupportChannelSupporterId.forEach(function(group2){
                            if (group.id() == group2){
                                engine.log("Supporter " + ev.client.name() + " leave Server! Check Suppport Channel..")
                                     if (!(issupporterOnline(channelEdit.spSupportChannelPrefix)))
                                         {
                                             closeSupportChannel(channelEdit.spSupportChannelPrefix)
                                        }else{
                                        }
                                    }
                                     });
                                      });

                });
            }else if (ev.toChannel.id() == afkCh.spAfkChannel && config.spSupportChannelCloseAutomatic  || (isAFK(ev.toChannel.id()) && config.spSupportChannelCloseAutomatic)) {
                config.spChannelEdit.forEach(function(channelEdit){
                    ev.client.getServerGroups().forEach(function(group){
                        channelEdit.spSupportChannelSupporterId.forEach(function(group2){
                            if (group.id() == group2){
                                engine.log("Supporter " + ev.client.name() + " got to AFK Channel! Check Suppport Channel..")
                                     if (!(issupporterOnline(channelEdit.spSupportChannelPrefix)))
                                         {
                                             closeSupportChannel(channelEdit.spSupportChannelPrefix)
                                        }else{
                                        }
                                    }
                                     });
                                      });

                });
            }
        });

       
    }
    });


 //--------------------------------------------------- { Time SupportChannel Manager} -----------------------------------------------------------

    var tz = [-11,-10,-9,-8.5,-8,-7,-6,-5,-4,-3.5,-3,-2.5,-2,-1,0,1,2,3,4,4.5,5,5.5,6,6.5,6.75,7,7.5,8,9,9.5,9.75,10,10.5,11,11.5,12,13,13.75,14,15];

        function time() {
        var nonutc = new Date();
        var utc = nonutc.getTime() + (nonutc.getTimezoneOffset() * 60000);
        var now = new Date(utc + (3600000*tz[config.spTimeZo]));
        var h = now.getHours();
        var m = now.getMinutes();
        
        if (m<10) {
            m = "0" + m;
        }
        
        return ntime = h + ":" + m;
    }


       if (config.spTimeChannelManagerActiv)
       {
        setInterval(function() {
            var timeNow = time(); 
            config.spTimeChannelManager.forEach(function(timeManager){
                if (timeNow == timeManager.spTime){
                    
                      if (timeManager.spTimeAction == 0)
                      {
                          openSupportChannel(timeManager.spTimePrefix)
                           engine.log("Support channel " + timeManager.spTimePrefix + " are open by time." )
                      }
                      else
                      {
                        closeSupportChannel(timeManager.spTimePrefix)
                        engine.log("Support channel " + timeManager.spTimePrefix + " are close by time." )
                      }
               
                }

            });

           
        }, 50000);
       }



        //--------------------------------------------------- {ChannelEdit} -----------------------------------------------------------
   

    //--------------------------------------------------- {Queue play track} -----------------------------------------------------------

    //For this module, I would like to thank TS3Index. I have been inspired by the "welcome sound" script...

    var resumePlayback = false;
    var resumeTrack = false;
    var resumePlaylist = false;
    var resumePos = 0;
    var securejoin = true;
    var spQueueVolumen;
    var oldVolumen;
    var currentTrack;
    var posTrack;
    var queueChannel;
    var queueClient;

    var connectUrl = "http://sounds.support-pp.de/"
    var playUrl;

var sounds = ["null",
            "Support_Offline_FAQ_Musik.wav", 
            "Support_Offline_Lite.wav", 
            "Support_Offline_Lite_Dunkle_Stimme.wav", 
            "Support_Offline_Lite_Helle_Stimme.wav", 
            "Support_Offline_Lite_Langame_Stimme.wav",
            "Support_Offline_Lite_Musik.wav",

            "Support_Online_FAQ.wav",
            "Support_Online_FAQ_Musik.wav",
            "Support_Online_Funny_EricCartman.wav",
            "Support_Online_Funny_EricCartman_Musik.wav",
            "Support_Online_Lite_Mitarbeiter.wav",
            "Support_Online_Lite_Mitarbeiter_Gespr√§ch.wav",
            "Support_Online_Lite_Supporter.wav",
            "Support_Online_Lite_Supporter_Gespr√§ch.wav",
            "Support_Online_Lite_Supporter_Gespr√§ch_Musik.wav",

            "Willkommen_Lite.wav",
            "Willkommen_Regeln_Funny_Musik.wav",
            "Willkommen_Regeln_Happy.wav",
            "Willkommen_Regeln_Happy_Musik.wav",
            "Willkommen_Regeln_Webseite_Musik_1.wav",
            "Willkommen_Regeln_Webseite_Musik_2.wav",

            "Support_Offline_Lite_EN.wav",
            "Support_Offline_Lite_Music_EN.wav"
            ];

    function playQueuTrack(channelId) {

        if (config.spQueueActiv) {
          //  if (!(typeof config.spQueueTrackOnline == 'undefined')) {
                if (typeof config.spQueueVolumen == 'undefined') {
                    spQueueVolumen = 70;
                } else {
                    spQueueVolumen = config.spQueueVolumen;
                }
                setTimeout(function() {
                    TrackBotJoin(channelId);
                }, 600);
                engine.log("Queue starting...");
                var currentTrack = media.getCurrentTrack();
                if (audio.isPlaying()) {
                    resumePlayback = true;
                    resumePos = audio.getTrackPosition();
                    resumeTrack = currentTrack;
                    resumePlaylist = media.getActivePlaylist() ? media.getActivePlaylist().id() : false;
                    if (config.spQueueOwnActiv)
                    {
                        media.playURL(config.spQueueTrackOnline.url + '&callback=spQueue&copy=true');
                    }else{
                         media.playURL(connectUrl + sounds[config.spSelectMusic] + '&callback=spQueue&copy=true' );
                    }
                        
                } else if (resumePlayback) {
                    securejoin = false;
                    
              if (config.spQueueOwnActiv)
                    {
                        media.playURL(config.spQueueTrackOnline.url + '&callback=spQueue&copy=true');
                    }else{
                         media.playURL(connectUrl + sounds[config.spSelectMusic] + '&callback=spQueue&copy=true' );
                    }
                } else {
                     if (config.spQueueOwnActiv)
                    {
                        media.playURL(config.spQueueTrackOnline.url);
                    }else{
                         media.playURL(connectUrl + sounds[config.spSelectMusic]);
                    }

                    //config.spQueueTrackOnline.url
                }
           // } else {
             //   engine.log('No Track select!')
            //}
        }
    }
function playQueuTrackOffline(channelId) {

        if (config.spQueueActiv) {
          //  if (!(typeof config.spQueueTrackOnline == 'undefined')) {
                if (typeof config.spQueueVolumen == 'undefined') {
                    spQueueVolumen = 70;
                } else {
                    spQueueVolumen = config.spQueueVolumen;
                }
                setTimeout(function() {
                    TrackBotJoin(channelId);
                }, 600);
                engine.log("Queue starting...");
                var currentTrack = media.getCurrentTrack();
                if (audio.isPlaying()) {
                    resumePlayback = true;
                    resumePos = audio.getTrackPosition();
                    resumeTrack = currentTrack;
                    resumePlaylist = media.getActivePlaylist() ? media.getActivePlaylist().id() : false;
                    if (config.spQueueOwnActiv)
                    {
                        media.playURL(config.spQueueTrackOffline.url + '&callback=spQueue&copy=true');
                    }else{
                         media.playURL(connectUrl + sounds[config.spSelectMusicOffline] + '&callback=spQueue&copy=true' );
                    }
                        
                } else if (resumePlayback) {
                    securejoin = false;
                    
              if (config.spQueueOwnActiv)
                    {
                        media.playURL(config.spQueueTrackOffline.url + '&callback=spQueue&copy=true');
                    }else{
                         media.playURL(connectUrl + sounds[config.spSelectMusicOffline] + '&callback=spQueue&copy=true' );
                    }
                } else {
                     if (config.spQueueOwnActiv)
                    {
                        media.playURL(config.spQueueTrackOffline.url);
                    }else{
                         media.playURL(connectUrl + sounds[config.spSelectMusicOffline]);
                    }

                    //config.spQueueTrackOnline.url
                }
           // } else {
             //   engine.log('No Track select!')
            //}
        }
    }
       

    event.on('trackEnd', function(ev, callback) {
        engine.log('Queue trach finnish')
        if (callback == 'spQueue' && resumePlayback) {
            if (securejoin && resumeTrack) {
                engine.log("Resume last track: " + resumeTrack.Title());
                resumePlayback = false;
                TrackBotJoin(queueChannel);
                if (resumeTrack.Type() == 'url' && resumeTrack.Filename()) {
                    media.playURL(resumeTrack.Filename());
                } else if (resumeTrack.id()) {
                    audio.setMute(true);
                    if (resumePlaylist) media.getPlaylistByID(resumePlaylist).setActive();
                    media.playURL("track://" + resumeTrack.id());
                    audio.seek(resumePos);
                    audio.setMute(false);
                }
            }
            securejoin = true;
        }
    });

    function TrackBotJoin(channelId) {
        if (config.spQueueMove) {
            backend.getClients().forEach(function(client) {
                if (client.isSelf() == true) {
                    queueClient = client.id();
                    client.getChannels().forEach(function(channel) {
                        queueChannel = channel;
                        if (channel.id() == channelId.id()) {
                            engine.log('[Queue] Is alredy in Channel..');
                        } else {
                            client.moveTo(channelId);
                        }
                    });
                }
            });
        }
    }

    //--------------------------------------------------- {Queue play track} -----------------------------------------------------------


    function CreateTicketDb(client, text)
    {
        if (dbc) dbc.exec("INSERT INTO sp_tickets (text, uuid, name, version, status ) VALUE ('"+helpers.base64Encode(text)+"', '"+client.uid()+"', '"+client.name()+"', '"+client.getPlatform() + "::" + client.getVersion() +"', '1')");
        engine.log("Create ticket in the db!");  
    }

    function ChangeTicketStatusDb(id, status)
    {
        if (dbc) dbc.exec("UPDATE sp_tickets SET status='"+status+"' WHERE id='"+id+"'");
        engine.log("Update ticket in the db!");  
    }

    //Data
    var date;
    date = new Date();
        date = date.getUTCFullYear() + '-' +
        ('00' + (date.getUTCMonth()+1)).slice(-2) + '-' +
        ('00' + date.getUTCDate()).slice(-2) + ' ' + 
        ('00' + date.getUTCHours()).slice(-2) + ':' + 
        ('00' + date.getUTCMinutes()).slice(-2) + ':' + 
        ('00' + date.getUTCSeconds()).slice(-2);

    function CloseTicket(id, status)
    {
        ChangeTicketStatusDb(id, 0);
        if (dbc) dbc.exec("UPDATE sp_tickets SET data_close='"+date+"' WHERE id='"+id+"'");
        engine.log("Update ticket in the db!");  
    }

    // ****** WEB EVENT ****

    event.on('api:sp_config', function(ev) {
        return {succes: true, data: info};
      });

    event.on('api:sp_tickets_get', function(ev) {
        return {succes: true, data: info};
      });

    event.on('api:sp_tickets_get', function(ev) {
        return {succes: true, data: info};
      });


});
